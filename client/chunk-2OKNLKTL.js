import{a as I}from"./chunk-EMVGCN2L.js";import{c as R,d as T,e as V,f as q,h as L,i as P,k as $,p as j,r as H,s as b}from"./chunk-I7FMFDTU.js";import{$ as O,Aa as U,Ba as h,D,J as l,M as f,R as N,X as m,Y as d,aa as A,ba as G,ca as n,da as r,ea as v,hb as E,ib as w,la as y,mb as M,na as p,pa as c,v as u,w as g,x as _,y as k,z as F,za as a}from"./chunk-JNXP6C27.js";function K(o,t){o&1&&(n(0,"span"),a(1,"Group Name is required."),r())}function z(o,t){if(o&1&&(n(0,"span"),a(1),r()),o&2){let e=c(2);l(),h(" Group Name cannot exceed ",e.groupName==null||e.groupName.errors==null||e.groupName.errors.maxlength==null?null:e.groupName.errors.maxlength.requiredLength," characters. ")}}function J(o,t){if(o&1&&(n(0,"div",13),m(1,K,2,0,"span"),m(2,z,2,1,"span"),r()),o&2){let e=c();l(),d(!(e.groupName==null||e.groupName.errors==null)&&e.groupName.errors.required?1:-1),l(),d(!(e.groupName==null||e.groupName.errors==null)&&e.groupName.errors.maxlength?2:-1)}}var x=class o{_coreService=u(M);_apiFs=u(b);_fb=u(j);isEditMode=!1;machineGroupData;closeOrCancel=new N;upsert=new N;mgForm=this._fb.group({groupName:["",[T.required,T.maxLength(120)]]});ngOnChanges(t){t.machineGroupData?.currentValue&&(this.isEditMode=!!t.machineGroupData?.currentValue?._id,this.mgForm.patchValue({groupName:this.machineGroupData?.groupName||""}))}get groupName(){return this.mgForm.get("groupName")}isReqAlive=!1;onSubmit(){if(this.isReqAlive)return;if(this.mgForm.invalid){this.mgForm.markAllAsTouched();return}let t={groupName:this.groupName?.value};if(console.log("Submitting workspace form with data:",t),this.isReqAlive=!0,!this.isEditMode)this._apiFs.machineGroup.create(t).subscribe({next:e=>{this.isReqAlive=!1,e.code==="CREATED"&&(this._coreService.utils.showToaster("success","Machine Group created successfully."),this.upsert.emit(!0))},error:e=>{this.isReqAlive=!1;let i=e?.error?.message||"Something went wrong, please try again later.";this._coreService.utils.showToaster("danger",i)}});else{let e=this.machineGroupData?._id;if(!e){this.isReqAlive=!1,this._coreService.utils.showToaster("danger","Machine Group ID is missing.");return}this._apiFs.machineGroup.update(e,t).subscribe({next:i=>{this.isReqAlive=!1,i.code==="OK"&&(this._coreService.utils.showToaster("success","Machine Group updated successfully."),this.upsert.emit(i.data))},error:i=>{this.isReqAlive=!1;let s=i?.error?.message||"Something went wrong, please try again later.";this._coreService.utils.showToaster("danger",s)}})}}onCloseOrCancel(){this.closeOrCancel.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-upsert-machine-group"]],inputs:{machineGroupData:"machineGroupData"},outputs:{closeOrCancel:"close",upsert:"upsert"},features:[D],decls:22,vars:4,consts:[[1,"modal","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","shadow-lg"],[3,"ngSubmit","formGroup"],[1,"modal-header"],[1,"modal-title","fs-5"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12","mb-3"],["for","groupName",1,"form-label"],[1,"text-danger"],["type","text","id","groupName","formControlName","groupName","placeholder","Enter Group Name",1,"form-control"],[1,"invalid-feedback","d-block"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-3",3,"click"],[1,"btn","btn-primary"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),p("ngSubmit",function(){return i.onSubmit()}),n(4,"div",4)(5,"h1",5),a(6),r(),n(7,"button",6),p("click",function(){return i.onCloseOrCancel()}),r()(),n(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),a(12," Group Name "),n(13,"span",11),a(14,"*"),r()(),v(15,"input",12),m(16,J,3,2,"div",13),r()()(),n(17,"div",14)(18,"button",15),p("click",function(){return i.onCloseOrCancel()}),a(19," Cancel "),r(),n(20,"button",16),a(21),r()()()()()()),e&2&&(l(3),G("formGroup",i.mgForm),l(3),h(" ",i.isEditMode?"Edit ":"Create ","Machine Group "),l(10),d(i.groupName!=null&&i.groupName.touched&&(i.groupName!=null&&i.groupName.errors)?16:-1),l(5),h(" ",i.isEditMode?"Update":"Create"," "))},dependencies:[H,L,R,V,q,P,$],encapsulation:2})};var Q=(o,t)=>t._id;function X(o,t){if(o&1){let e=y();n(0,"tr")(1,"th",14),a(2),r(),n(3,"td",15),a(4),r(),n(5,"td")(6,"button",16),p("click",function(){let s=g(e).$implicit,S=c();return _(S.onOpenUpsertWorkspaceModal(s))}),a(7," Edit "),r()()()}if(o&2){let e=t.$implicit,i=t.$index;l(2),U(i+1),l(2),h(" ",e==null?null:e.groupName," ")}}function Y(o,t){if(o&1){let e=y();n(0,"app-upsert-machine-group",17),p("close",function(){g(e);let s=c();return _(s.onCloseMachineGroupModal())})("upsert",function(s){g(e);let S=c();return _(S.upsertMachineGroupModalEvent(s))}),r()}if(o&2){let e=c();G("machineGroupData",e.upsertMachineGroupModalData)}}var C=class o{_coreService=u(M);_apiFs=u(b);upsertMachineGroupModalData;isUpsertMachineGroupModalOpen=!1;ngOnInit(){this.loadList()}machineGroupList=[];loadList(){this._apiFs.machineGroup.list().subscribe({next:t=>{t.code==="OK"&&(this.machineGroupList=t.data||[])},error:t=>{}})}onOpenUpsertWorkspaceModal(t=null){this.upsertMachineGroupModalData=t,this.isUpsertMachineGroupModalOpen=!0}onCloseMachineGroupModal(){this.isUpsertMachineGroupModalOpen=!1}upsertMachineGroupModalEvent(t){let e=t?this.machineGroupList.findIndex(i=>i._id===t._id):-1;e>-1?this.machineGroupList[e]=t:this.loadList(),this.onCloseMachineGroupModal()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-machine-group"]],decls:26,vars:1,consts:[[1,"container-xxl","p-3","my-4","bg-white","shadow-sm","rounded-2","border"],[1,"table-responsive"],[1,"table","caption-top","table-striped","table-hover"],[1,"d-flex","align-items-center","justify-content-between","gap-2","flex-wrap"],[1,"text-capitialise","fs-5"],[1,"btn","btn-outline-primary","btn-sm","d-flex","align-items-center","gap-1",3,"click"],["height","18","width","18","viewBox","0 0 48 48",1,"flex-shrink-0"],["fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","4","stroke-linecap","round","x1","8","x2","40","y1","24","y2","24"],["fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","4","stroke-linecap","round","x1","24","x2","24","y1","8","y2","40"],[1,"text-nowrap"],[1,"table-dark","bg-opacity-50"],["scope","col",1,"w-1-percent"],["scope","col",1,"text-nowrap"],[3,"machineGroupData"],["scope","row"],[1,"text-capitalize"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[3,"close","upsert","machineGroupData"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"table",2)(3,"caption")(4,"div",3)(5,"strong",4),a(6," Machine Group "),r(),n(7,"div")(8,"button",5),p("click",function(){return i.onOpenUpsertWorkspaceModal()}),k(),n(9,"svg",6),v(10,"line",7)(11,"line",8),r(),F(),n(12,"span",9),a(13," New Machine Group "),r()()()()(),n(14,"thead",10)(15,"tr")(16,"th",11),a(17,"#"),r(),n(18,"th",12),a(19," Group Name "),r(),n(20,"th",11),a(21," Action "),r()()(),n(22,"tbody"),O(23,X,8,2,"tr",null,Q),r()()()(),m(25,Y,1,1,"app-upsert-machine-group",13)),e&2&&(l(23),A(i.machineGroupList),l(2),d(i.isUpsertMachineGroupModalOpen?25:-1))},dependencies:[x],encapsulation:2})};var Ce=[{path:E.SETTINGS.MACHINE_GROUP,title:w.SETTINGS.MACHINE_GROUP,component:C},{path:E.PAGE_NOT_FOUND,title:w.PAGE_NOT_FOUND,component:I}];export{Ce as routes};
