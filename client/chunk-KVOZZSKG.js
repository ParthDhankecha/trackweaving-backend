import{b as qe,c as ze,d as We}from"./chunk-CBHUF4HT.js";import{$ as h,Ba as E,C as $,Ca as ye,Ha as ie,Ia as Y,J as v,Ja as Se,K as g,L as pe,M as xe,N as F,O as V,P as A,Q as r,Qa as oe,R as o,S as M,Sa as j,T as m,U as c,V as N,Wa as w,Xa as Q,Z as L,_ as be,a as R,aa as ee,ab as Ie,b as Z,ba as u,bb as H,d as Ce,db as re,eb as D,fb as le,gb as ae,ha as Ee,hb as Me,ib as we,ja as T,jb as de,kb as Pe,lb as Ae,ma as t,mb as Oe,na as te,nb as Te,o as O,oa as C,ob as ke,p as S,pa as k,pb as Ne,q as I,qa as U,qb as De,r as W,ra as q,rb as Le,s as J,sa as z,sb as Fe,t as _e,ta as he,tb as Ve,ub as Ge,w as fe,wa as ne,wb as Be,xb as Re,yb as Ue,z as a,za as x,zb as K}from"./chunk-ILSALWDS.js";var G=Ce(Ie());var Je=(l,i)=>i._id;function et(l,i){if(l&1&&(r(0,"span",47),t(1),x(2,"date"),x(3,"date"),o()),l&2){let e=u().$implicit;T("bg-warning",e==null?null:e.isSubscriptionEndingSoon)("bg-danger",e==null?null:e.isSubscriptionEnded)("text-muted",e==null?null:e.isSubscriptionEndingSoon),a(),k(" ",E(2,8,(e==null||e.workspace==null?null:e.workspace.subscriptionStartDate)??"","yyyy/MM/dd")," \u2013 ",E(3,11,(e==null||e.workspace==null?null:e.workspace.subscriptionEndDate)??"","yyyy/MM/dd")," ")}}function tt(l,i){if(l&1&&(r(0,"span",37),t(1),x(2,"date"),x(3,"date"),o()),l&2){let e=u().$implicit;a(),k(" ",E(2,2,(e==null||e.workspace==null?null:e.workspace.subscriptionStartDate)??"","yyyy/MM/dd")," \u2013 ",E(3,5,(e==null||e.workspace==null?null:e.workspace.subscriptionEndDate)??"","yyyy/MM/dd")," ")}}function nt(l,i){if(l&1){let e=L();r(0,"button",48),h("click",function(){S(e);let d=u().$implicit,s=u();return I(s.openPaymentModal(d,!0))}),t(1," View "),o()}}function it(l,i){if(l&1){let e=L();r(0,"tr")(1,"th",29),t(2),o(),r(3,"td",30),t(4),o(),r(5,"td",31),t(6),o(),r(7,"td",32),t(8),o(),r(9,"td",33)(10,"span",34),t(11),o()(),r(12,"td",35),v(13,et,4,14,"span",36)(14,tt,4,8,"span",37),o(),r(15,"td",32),t(16),x(17,"date"),o(),r(18,"td",38),t(19),x(20,"number"),o(),r(21,"td",33)(22,"div",39)(23,"div",40)(24,"input",41),h("change",function(d){let s=S(e).$implicit,f=u();return I(f.onPaymentStatusChange(s,d))}),o()(),v(25,nt,2,0,"button",42),o()(),r(26,"td",33)(27,"div",43)(28,"button",44),h("click",function(){let d=S(e).$implicit,s=u();return I(s.navigateToPrint(d._id))}),t(29," Print "),o(),r(30,"button",45),h("click",function(){let d=S(e).$implicit,s=u();return I(s.navigateToUpsert(d._id))}),t(31," Edit "),o(),r(32,"button",46),h("click",function(){let d=S(e).$implicit,s=u();return I(s.openDeleteConfirmModal(d))}),t(33," Delete "),o()()()()}if(l&2){let e=i.$implicit,n=i.$index,d=u();a(2),C(" ",(d.currentPage-1)*d.pageSize+n+1," "),a(2),C(" ",(e==null||e.workspace==null?null:e.workspace.firmName)??"-"," "),a(2),C(" ",(e==null||e.workspace==null?null:e.workspace.gst)??"-"," "),a(2),C(" ",(e==null?null:e.invoiceNo)??"-"," "),a(2),T("bg-success",e==null?null:e.includesGst)("bg-danger",!(e!=null&&e.includesGst)),a(),C(" ",e!=null&&e.includesGst?"Yes":"No"," "),a(2),g(e!=null&&e.isSubscriptionEndingSoon||e!=null&&e.isSubscriptionEnded?13:14),a(3),C(" ",E(17,16,(e==null?null:e.invoiceDate)??"","yyyy/MM/dd")," "),a(3),C(" ",E(20,19,(e==null?null:e.finalAmount)??(e==null?null:e.totalAmount)??0,"1.2-2")," "),a(5),A("name",he("paymentStatus-"+n))("checked",(e==null||e.payment==null?null:e.payment.isPaid)??!1),a(),g(!(e==null||e.payment==null)&&e.payment.isPaid?25:-1)}}function ot(l,i){l&1&&(r(0,"tr")(1,"td",49),t(2," No records found. "),o()())}function rt(l,i){if(l&1&&(r(0,"div",57)(1,"div",61)(2,"strong"),t(3,"Firm:"),o(),t(4),o(),r(5,"div",61)(6,"strong"),t(7,"Subscription:"),o(),t(8),x(9,"date"),x(10,"date"),o(),r(11,"div",62)(12,"strong"),t(13,"Invoice Date:"),o(),t(14),x(15,"date"),o(),r(16,"div",61)(17,"strong"),t(18,"Amount:"),o(),t(19),x(20,"number"),o()()),l&2){let e=u(2);a(4),C(" ",(e.deleteConfirmModalConfig.data==null||e.deleteConfirmModalConfig.data.workspace==null?null:e.deleteConfirmModalConfig.data.workspace.firmName)??"-"," "),a(4),k(" ",E(9,5,(e.deleteConfirmModalConfig.data==null||e.deleteConfirmModalConfig.data.workspace==null?null:e.deleteConfirmModalConfig.data.workspace.subscriptionStartDate)??"","yyyy/MM/dd")," \u2013 ",E(10,8,(e.deleteConfirmModalConfig.data==null||e.deleteConfirmModalConfig.data.workspace==null?null:e.deleteConfirmModalConfig.data.workspace.subscriptionEndDate)??"","yyyy/MM/dd")," "),a(6),C(" ",E(15,11,(e.deleteConfirmModalConfig.data==null?null:e.deleteConfirmModalConfig.data.invoiceDate)??"","yyyy/MM/dd")," "),a(5),C(" ",E(20,14,(e.deleteConfirmModalConfig.data==null?null:e.deleteConfirmModalConfig.data.finalAmount)??0,"1.2-2")," ")}}function lt(l,i){if(l&1){let e=L();r(0,"div",28)(1,"div",50)(2,"div",51)(3,"div",52)(4,"h5",53),t(5,"Confirm Delete"),o(),r(6,"button",54),h("click",function(){S(e);let d=u();return I(d.closeDeleteConfirmModal())}),o()(),r(7,"div",55)(8,"p",56),t(9,"Are you sure you want to delete this invoice?"),o(),v(10,rt,21,17,"div",57),o(),r(11,"div",58)(12,"button",59),h("click",function(){S(e);let d=u();return I(d.closeDeleteConfirmModal())}),t(13," Cancel "),o(),r(14,"button",60),h("click",function(){S(e);let d=u();return I(d.confirmDelete())}),t(15," Delete "),o()()()()()}if(l&2){let e=u();a(10),g(e.deleteConfirmModalConfig.data?10:-1),a(4),A("disabled",e.isDeleteInProgress)}}function at(l,i){if(l&1){let e=L();r(0,"div",55)(1,"dl",63)(2,"dt",64),t(3,"Method"),o(),r(4,"dd",65),t(5),o(),r(6,"dt",64),t(7,"Date"),o(),r(8,"dd",65),t(9),x(10,"date"),o(),r(11,"dt",64),t(12,"Reference"),o(),r(13,"dd",65),t(14),o(),r(15,"dt",64),t(16,"Notes"),o(),r(17,"dd",65),t(18),o()()(),r(19,"div",58)(20,"button",59),h("click",function(){S(e);let d=u(2);return I(d.closePaymentModal())}),t(21,"Close"),o()()}if(l&2){let e=u(2);a(5),C(" ",e.paymentModalConfig.payment.method||"\u2013"," "),a(4),C(" ",ye(10,4,e.paymentModalConfig.payment.date,"yyyy/MM/dd","\u2013")," "),a(5),C(" ",e.paymentModalConfig.payment.reference||"\u2013"," "),a(4),C(" ",e.paymentModalConfig.payment.notes||"\u2013"," ")}}function dt(l,i){if(l&1){let e=L();r(0,"form",66,0),h("ngSubmit",function(){S(e);let d=u(2);return I(d.confirmPayment())}),r(2,"div",55)(3,"div",56)(4,"label",67),t(5,"Method "),r(6,"span",68),t(7,"*"),o()(),r(8,"input",69),z("ngModelChange",function(d){S(e);let s=u(2);return q(s.paymentModalConfig.payment.method,d)||(s.paymentModalConfig.payment.method=d),I(d)}),o()(),r(9,"div",56)(10,"label",70),t(11,"Date "),r(12,"span",68),t(13,"*"),o()(),r(14,"input",71),z("ngModelChange",function(d){S(e);let s=u(2);return q(s.paymentModalConfig.payment.date,d)||(s.paymentModalConfig.payment.date=d),I(d)}),o()(),r(15,"div",56)(16,"label",72),t(17,"Reference"),o(),r(18,"input",73),z("ngModelChange",function(d){S(e);let s=u(2);return q(s.paymentModalConfig.payment.reference,d)||(s.paymentModalConfig.payment.reference=d),I(d)}),o()(),r(19,"div",56)(20,"label",74),t(21,"Notes"),o(),r(22,"textarea",75),z("ngModelChange",function(d){S(e);let s=u(2);return q(s.paymentModalConfig.payment.notes,d)||(s.paymentModalConfig.payment.notes=d),I(d)}),o()()(),r(23,"div",58)(24,"button",59),h("click",function(){S(e);let d=u(2);return I(d.closePaymentModal())}),t(25,"Cancel"),o(),r(26,"button",76),t(27," Mark as Paid "),o()()()}if(l&2){let e=Ee(1),n=u(2);a(8),U("ngModel",n.paymentModalConfig.payment.method),a(6),U("ngModel",n.paymentModalConfig.payment.date),a(4),U("ngModel",n.paymentModalConfig.payment.reference),a(4),U("ngModel",n.paymentModalConfig.payment.notes),a(4),A("disabled",n.isPaymentSubmitInProgress||e.invalid)}}function ct(l,i){if(l&1){let e=L();r(0,"div",28)(1,"div",50)(2,"div",51)(3,"div",52)(4,"h5",53),t(5),o(),r(6,"button",54),h("click",function(){S(e);let d=u();return I(d.closePaymentModal())}),o()(),v(7,at,22,8)(8,dt,28,5,"form"),o()()()}if(l&2){let e=u();a(5),C(" ",e.paymentModalConfig.viewOnly?"Payment Details":"Mark as Paid"," "),a(2),g(e.paymentModalConfig.viewOnly?7:8)}}function st(l,i){if(l&1&&(r(0,"div",57)(1,"div",61)(2,"strong"),t(3,"Invoice No:"),o(),t(4),o(),r(5,"div",61)(6,"strong"),t(7,"Invoice Date:"),o(),t(8),x(9,"date"),o(),r(10,"div",61)(11,"strong"),t(12,"Firm:"),o(),t(13),o(),r(14,"div",61)(15,"strong"),t(16,"GST No:"),o(),t(17),o(),r(18,"div",61)(19,"strong"),t(20,"GST Bill:"),o(),t(21),o()()),l&2){let e=u(2);a(4),C(" ",(e.unpaidConfirmModalConfig.data==null?null:e.unpaidConfirmModalConfig.data.invoiceNo)??"-"," "),a(4),C(" ",E(9,5,(e.unpaidConfirmModalConfig.data==null?null:e.unpaidConfirmModalConfig.data.invoiceDate)??"","yyyy/MM/dd")," "),a(5),C(" ",(e.unpaidConfirmModalConfig.data==null||e.unpaidConfirmModalConfig.data.workspace==null?null:e.unpaidConfirmModalConfig.data.workspace.firmName)??"-"," "),a(4),C(" ",(e.unpaidConfirmModalConfig.data==null||e.unpaidConfirmModalConfig.data.workspace==null?null:e.unpaidConfirmModalConfig.data.workspace.gst)??"-"," "),a(4),C(" ",e.unpaidConfirmModalConfig.data!=null&&e.unpaidConfirmModalConfig.data.includesGst?"Yes":"No"," ")}}function mt(l,i){if(l&1){let e=L();r(0,"div",28)(1,"div",50)(2,"div",51)(3,"div",52)(4,"h5",53),t(5," Confirm Mark as Unpaid "),o(),r(6,"button",54),h("click",function(){S(e);let d=u();return I(d.closeUnpaidConfirmModal())}),o()(),r(7,"div",55)(8,"p",77),t(9," Are you sure you want to mark this invoice as "),r(10,"strong"),t(11,"unpaid"),o(),t(12,"? "),o(),v(13,st,22,8,"div",57),r(14,"p",78),t(15," This action will remove the payment details and mark the invoice as unpaid. "),o()(),r(16,"div",58)(17,"button",59),h("click",function(){S(e);let d=u();return I(d.closeUnpaidConfirmModal())}),t(18," Cancel "),o(),r(19,"button",79),h("click",function(){S(e);let d=u();return I(d.confirmUnpaid())}),t(20," Mark as Unpaid "),o()()()()()}if(l&2){let e=u();a(13),g(e.unpaidConfirmModalConfig.data?13:-1),a(6),A("disabled",e.isUnpaidInProgress)}}var ce=class l{_apiFs=O(K);_coreService=O(H);_router=O(j);currentPage=1;pageSize=10;totalEntries=0;searchTerms="";gstBillFilter="";invoiceList=[];deleteConfirmModalConfig={isOpen:!1,data:null};isDeleteInProgress=!1;paymentModalConfig={isOpen:!1,viewOnly:!1,invoice:null,payment:{method:"",date:"",reference:"",notes:""}};unpaidConfirmModalConfig={isOpen:!1,data:null};isPaymentSubmitInProgress=!1;isUnpaidInProgress=!1;ngOnInit(){this.loadList()}loadList(){let i={};this.pageSize&&this.pageSize>0&&(i.limit=this.pageSize),this.currentPage&&this.currentPage>0&&(i.page=this.currentPage),this.searchTerms?.trim()&&(i.filter=i.filter??{},i.filter.search=this.searchTerms.trim()),(this.gstBillFilter==="true"||this.gstBillFilter==="false")&&(i.filter=i.filter??{},i.filter.includesGst=this.gstBillFilter==="true"),this._apiFs.invoice.list(i).subscribe({next:e=>{e.code==="OK"&&(this.invoiceList=(e.data?.list??[]).map(n=>{let d=n?.workspace?.subscriptionEndDate;return Z(R({},n),{isSubscriptionEndingSoon:d&&(0,G.default)(d).isBefore((0,G.default)().add(30,"days")),isSubscriptionEnded:d&&(0,G.default)(d).isBefore((0,G.default)())})}),this.totalEntries=e.data?.count??0)},error:()=>{}})}onSearch(i){i.stopPropagation(),this.currentPage=1,this.loadList()}onGstBillFilterChange(){this.currentPage=1,this.loadList()}onPageChange(i){this.currentPage=i,this.loadList()}onEntriesPerPageChange(i){i&&i>0&&(this.currentPage=1,this.pageSize=i,this.loadList())}navigateToUpsert(i){this._router.navigateByUrl(`/${w.ADMIN.BASE}/${w.ADMIN.INVOICE}/${w.ADMIN.INVOICE_UPSERT}${i?`/${i}`:""}`)}navigateToPrint(i){i&&this._router.navigateByUrl(`/${w.ADMIN.BASE}/${w.ADMIN.INVOICE}/${w.ADMIN.INVOICE_PRINT}/${i}`)}openDeleteConfirmModal(i){i?._id&&(this.deleteConfirmModalConfig={isOpen:!0,data:i})}closeDeleteConfirmModal(){this.deleteConfirmModalConfig={isOpen:!1,data:null}}confirmDelete(){let i=this.deleteConfirmModalConfig.data;!i?._id||this.isDeleteInProgress||(this.isDeleteInProgress=!0,this._apiFs.invoice.delete(i._id).subscribe({next:e=>{this.isDeleteInProgress=!1,this.closeDeleteConfirmModal(),e.code==="OK"&&(this._coreService.utils.showToaster("success","Invoice deleted successfully."),this.loadList())},error:e=>{this.isDeleteInProgress=!1;let n=e?.error?.message??"Something went wrong. Please try again.";this._coreService.utils.showToaster("danger",n)}}))}onPaymentStatusChange(i,e){let n=e.target,d=n?.checked??!1;i?._id&&(d?this.paymentModalConfig={isOpen:!0,viewOnly:!1,invoice:i,payment:{method:i?.payment?.method??"",date:i?.payment?.date?(0,G.default)(i.payment.date).format("YYYY-MM-DD"):(0,G.default)().format("YYYY-MM-DD"),reference:i?.payment?.reference??"",notes:i?.payment?.notes??""}}:this.unpaidConfirmModalConfig={isOpen:!0,data:i},n.checked=i?.payment?.isPaid??!1)}openPaymentModal(i,e=!1){i?._id&&(this.paymentModalConfig={isOpen:!0,viewOnly:e,invoice:i,payment:i?.payment})}closePaymentModal(){this.paymentModalConfig={isOpen:!1,viewOnly:!1,invoice:null,payment:{method:"",date:"",reference:"",notes:""}}}confirmPayment(){let{invoice:i,payment:e}=this.paymentModalConfig;if(!i?._id||this.isPaymentSubmitInProgress)return;this.isPaymentSubmitInProgress=!0;let n={isPaid:!0,payment:{method:e.method??"",date:e.date?(0,G.default)(e.date).format("YYYY-MM-DD"):null,reference:e.reference??"",notes:e.notes??""}};this._apiFs.invoice.updatePaymentStatus(i._id,n).subscribe({next:d=>{this.isPaymentSubmitInProgress=!1,this.closePaymentModal(),d.code==="OK"&&(this._coreService.utils.showToaster("success","Payment status updated."),this.loadList())},error:d=>{this.isPaymentSubmitInProgress=!1;let s=d?.error?.message??"Something went wrong. Please try again.";this._coreService.utils.showToaster("danger",s)}})}closeUnpaidConfirmModal(){this.unpaidConfirmModalConfig={isOpen:!1,data:null}}confirmUnpaid(){let i=this.unpaidConfirmModalConfig.data;!i?._id||this.isUnpaidInProgress||(this.isUnpaidInProgress=!0,this._apiFs.invoice.updatePaymentStatus(i._id,{isPaid:!1}).subscribe({next:e=>{this.isUnpaidInProgress=!1,this.closeUnpaidConfirmModal(),e.code==="OK"&&(this._coreService.utils.showToaster("success","Invoice marked as unpaid."),this.loadList())},error:e=>{this.isUnpaidInProgress=!1;let n=e?.error?.message??"Something went wrong. Please try again.";this._coreService.utils.showToaster("danger",n)}}))}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=$({type:l,selectors:[["app-invoice"]],decls:58,vars:10,consts:[["paymentForm","ngForm"],[1,"py-2","px-4","d-flex","gap-3","align-items-center","sticky-inner-header"],[1,"d-flex","flex-grow-1","gap-2"],[1,"p-4"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","mb-3"],[1,"d-flex","gap-3","align-items-center","flex-wrap"],[3,"pageSizeChange","pageSize"],["type","text","placeholder","Search by Firm name","name","searchTerms",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-outline-primary","d-flex","align-items-center","gap-2",3,"click"],["height","20","width","20","viewBox","0 0 48 48",1,"flex-shrink-0"],["fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","4","stroke-linecap","round","x1","8","x2","40","y1","24","y2","24"],["fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","4","stroke-linecap","round","x1","24","x2","24","y1","8","y2","40"],[1,"text-nowrap"],[1,"table-responsive"],[1,"table","table-hover","invoice-list-table"],["scope","col",1,"text-nowrap","text-end"],["scope","col",1,"text-nowrap","text-start"],["scope","col",1,"text-nowrap","text-center"],["name","gstBillFilter",1,"form-select","form-select-sm","w-auto","mx-auto","fw-bold","text-center",3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"],["scope","col",1,"text-nowrap","text-center","actions-col"],[1,"d-block",3,"pageChange","pageSize","totalEntries","currentPage"],[1,"modal","fade","show","d-block"],["scope","row",1,"text-end"],[1,"word-break-all","text-start"],[1,"text-nowrap","text-start"],[1,"text-nowrap","text-end"],[1,"text-center"],[1,"badge","bg-secondary",2,"min-width","50px"],[1,"text-nowrap","text-center"],[1,"badge","bg-secondary",3,"bg-warning","bg-danger","text-muted"],[1,"small"],[1,"text-end"],[1,"d-flex","align-items-center","justify-content-center","gap-1"],[1,"form-check","form-switch","d-inline-block","mb-0"],["type","checkbox","role","switch",1,"form-check-input",3,"change","name","checked"],["type","button",1,"btn","btn-link","btn-sm","p-0","small"],[1,"d-flex","gap-2","justify-content-center","flex-wrap"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"badge","bg-secondary"],["type","button",1,"btn","btn-link","btn-sm","p-0","small",3,"click"],["colspan","10",1,"text-center","py-4"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","shadow-lg"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"small","text-muted","border","rounded","p-3","bg-light"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"mb-1"],[1,"mb-0"],[1,"row","mb-0","small"],[1,"col-sm-4","text-muted"],[1,"col-sm-8"],[3,"ngSubmit"],["for","paymentMethod",1,"form-label"],[1,"text-danger"],["type","text","name","paymentMethod","id","paymentMethod","placeholder","e.g. Bank Transfer, UPI, Cash","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","paymentDate",1,"form-label"],["type","date","name","paymentDate","id","paymentDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","paymentReference",1,"form-label"],["type","text","name","paymentReference","id","paymentReference","placeholder","Transaction / reference number",1,"form-control",3,"ngModelChange","ngModel"],["for","paymentNotes",1,"form-label"],["rows","2","name","paymentNotes","id","paymentNotes","placeholder","Optional notes",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-3","text-center"],[1,"mt-3","mb-0","text-center","small","text-danger"],["type","button",1,"btn","btn-warning",3,"click","disabled"]],template:function(e,n){e&1&&(r(0,"div",1),M(1,"div",2)(2,"div"),o(),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"app-entries-per-page-selector",8),h("pageSizeChange",function(s){return n.onEntriesPerPageChange(s)}),o(),r(9,"div")(10,"input",9),z("ngModelChange",function(s){return q(n.searchTerms,s)||(n.searchTerms=s),s}),h("keydown.enter",function(s){return n.onSearch(s)}),o()(),r(11,"button",10),h("click",function(s){return n.onSearch(s)}),t(12," Search "),o()(),r(13,"div",11)(14,"button",12),h("click",function(){return n.navigateToUpsert()}),W(),r(15,"svg",13),M(16,"line",14)(17,"line",15),o(),J(),r(18,"span",16),t(19," New Invoice "),o()()()(),r(20,"div",17)(21,"table",18)(22,"thead")(23,"tr")(24,"th",19),t(25,"#"),o(),r(26,"th",20),t(27,"Firm Name"),o(),r(28,"th",20),t(29,"GST No"),o(),r(30,"th",19),t(31,"Invoice No"),o(),r(32,"th",21)(33,"select",22),z("ngModelChange",function(s){return q(n.gstBillFilter,s)||(n.gstBillFilter=s),s}),h("ngModelChange",function(){return n.onGstBillFilterChange()}),r(34,"option",23),t(35,"All Bills"),o(),r(36,"option",24),t(37,"GST Bills"),o(),r(38,"option",25),t(39,"Non-GST Bills"),o()()(),r(40,"th",21),t(41,"Subscription Period"),o(),r(42,"th",19),t(43,"Invoice Date"),o(),r(44,"th",19),t(45,"Final Amount"),o(),r(46,"th",21),t(47,"Payment"),o(),r(48,"th",26),t(49,"Actions"),o()()(),r(50,"tbody"),F(51,it,34,22,"tr",null,Je,!1,ot,3,0,"tr"),o()()(),r(54,"app-pagination",27),h("pageChange",function(s){return n.onPageChange(s)}),o()()()(),v(55,lt,16,2,"div",28),v(56,ct,9,2,"div",28),v(57,mt,21,2,"div",28)),e&2&&(a(8),A("pageSize",n.pageSize),a(2),U("ngModel",n.searchTerms),a(23),U("ngModel",n.gstBillFilter),a(18),V(n.invoiceList),a(3),A("pageSize",n.pageSize)("totalEntries",n.totalEntries)("currentPage",n.currentPage),a(),g(n.deleteConfirmModalConfig.isOpen?55:-1),a(),g(n.paymentModalConfig.isOpen?56:-1),a(),g(n.unpaidConfirmModalConfig.isOpen?57:-1))},dependencies:[Re,de,Le,Fe,re,De,le,ae,Ge,we,Me,ze,We,ie,Y],styles:[".invoice-list-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .invoice-list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.invoice-list-table[_ngcontent-%COMP%]   .actions-col[_ngcontent-%COMP%]{min-width:200px}"]})};var ut=()=>["workspaceName","GSTNo"],pt=(l,i)=>i.value;function vt(l,i){l&1&&t(0," Please select a workspace. ")}function gt(l,i){if(l&1&&(r(0,"div",13),v(1,vt,1,0),o()),l&2){let e=u();a(),g(!(e.workspaceId==null||e.workspaceId.errors==null)&&e.workspaceId.errors.required?1:-1)}}function Ct(l,i){l&1&&t(0," Invoice date is required. ")}function _t(l,i){if(l&1&&(r(0,"div",13),v(1,Ct,1,0),o()),l&2){let e=u();a(),g(!(e.invoiceDate==null||e.invoiceDate.errors==null)&&e.invoiceDate.errors.required?1:-1)}}function ft(l,i){l&1&&t(0," AMC amount is required. ")}function xt(l,i){l&1&&t(0," AMC amount cannot be negative. ")}function bt(l,i){if(l&1&&(r(0,"div",13),v(1,ft,1,0),v(2,xt,1,0),o()),l&2){let e=u();a(),g(!(e.amcAmount==null||e.amcAmount.errors==null)&&e.amcAmount.errors.required?1:-1),a(),g(!(e.amcAmount==null||e.amcAmount.errors==null)&&e.amcAmount.errors.min?2:-1)}}function Et(l,i){l&1&&t(0," Firm name is required. ")}function ht(l,i){if(l&1&&(r(0,"div",13),v(1,Et,1,0),o()),l&2){let e=u();a(),g(!(e.firmName==null||e.firmName.errors==null)&&e.firmName.errors.required?1:-1)}}function yt(l,i){l&1&&t(0," Subscription start date is required. ")}function St(l,i){if(l&1&&(r(0,"div",13),v(1,yt,1,0),o()),l&2){let e=u();a(),g(!(e.subscriptionStartDate==null||e.subscriptionStartDate.errors==null)&&e.subscriptionStartDate.errors.required?1:-1)}}function It(l,i){l&1&&t(0," Subscription end date is required. ")}function Mt(l,i){if(l&1&&(r(0,"div",13),v(1,It,1,0),o()),l&2){let e=u();a(),g(!(e.subscriptionEndDate==null||e.subscriptionEndDate.errors==null)&&e.subscriptionEndDate.errors.required?1:-1)}}function wt(l,i){l&1&&(r(0,"div",25),t(1," At least one line item with amount greater than zero is required to create an invoice. "),o())}function Pt(l,i){l&1&&(r(0,"div",13),t(1,"Fill description, qty and unit price for this row. "),o())}function At(l,i){l&1&&(r(0,"div",13),t(1,"Qty cannot be negative."),o())}function Ot(l,i){l&1&&(r(0,"div",13),t(1,"Unit price cannot be negative."),o())}function Tt(l,i){if(l&1){let e=L();r(0,"tr",55)(1,"td"),M(2,"input",56),v(3,Pt,2,0,"div",13),o(),r(4,"td"),M(5,"input",57),v(6,At,2,0,"div",13),o(),r(7,"td")(8,"div",58)(9,"span",59),t(10,"x"),o(),M(11,"input",60),o(),v(12,Ot,2,0,"div",13),o(),r(13,"td")(14,"div",58)(15,"span",59),t(16,"="),o(),M(17,"input",61),o()(),r(18,"td")(19,"button",62),h("click",function(){let d=S(e).$index,s=u();return I(s.removeLineItem(d))}),W(),r(20,"svg",63),M(21,"path",64),o()()()()}if(l&2){let e,n,d,s,f,b,y,p=i.$index,_=u();T("table-danger",((e=_.getLineItemRowErrors(p))==null?null:e.lineItemIncomplete)&&(_.lineItemsArray.at(p).touched||_.invoiceForm.touched)),A("formGroupName",p),a(2),T("is-invalid",((n=_.getLineItemRowErrors(p))==null?null:n.lineItemIncomplete)&&(_.lineItemsArray.at(p).touched||_.invoiceForm.touched)),a(),g((d=_.getLineItemRowErrors(p))!=null&&d.lineItemIncomplete&&(_.lineItemsArray.at(p).touched||_.invoiceForm.touched)?3:-1),a(2),T("is-invalid",((s=_.getLineItemControl(p,"qty"))==null?null:s.touched)&&((s=_.getLineItemControl(p,"qty"))==null?null:s.errors)||((s=_.getLineItemRowErrors(p))==null?null:s.lineItemIncomplete)&&(_.lineItemsArray.at(p).touched||_.invoiceForm.touched)),a(),g((f=_.getLineItemControl(p,"qty"))!=null&&f.touched&&((f=_.getLineItemControl(p,"qty"))!=null&&f.errors)?6:-1),a(5),T("is-invalid",((b=_.getLineItemControl(p,"unitPrice"))==null?null:b.touched)&&((b=_.getLineItemControl(p,"unitPrice"))==null?null:b.errors)||((b=_.getLineItemRowErrors(p))==null?null:b.lineItemIncomplete)&&(_.lineItemsArray.at(p).touched||_.invoiceForm.touched)),a(),g((y=_.getLineItemControl(p,"unitPrice"))!=null&&y.touched&&((y=_.getLineItemControl(p,"unitPrice"))!=null&&y.errors)?12:-1),a(7),A("disabled",_.lineItemsArray.length<=1)}}function kt(l,i){l&1&&t(0," Please select whether the invoice includes GST. ")}function Nt(l,i){if(l&1&&(r(0,"div",13),v(1,kt,1,0),o()),l&2){let e=u();a(),g(!(e.includesGst==null||e.includesGst.errors==null)&&e.includesGst.errors.required?1:-1)}}function Dt(l,i){if(l&1&&(r(0,"div",39),M(1,"input",66),r(2,"label",67),t(3),o()()),l&2){let e=i.$implicit;a(),A("value",e.value)("id","taxType"+e.value),a(),A("for","taxType"+e.value),a(),te(e.label)}}function Lt(l,i){if(l&1&&(r(0,"div",37)(1,"label",10),t(2," Tax type "),r(3,"span",65),t(4," (CGST 9%, SGST 9%, IGST 18% - fixed) "),o()(),r(5,"div",38),F(6,Dt,4,4,"div",39,pt),o()()),l&2){let e=u();a(6),V(e.taxTypeOptions)}}function Ft(l,i){l&1&&t(0," Clear amount cannot be negative. ")}function Vt(l,i){if(l&1&&(t(0),x(1,"number")),l&2){let e=u(2);C(" Clear amount cannot exceed total amount (\u20B9",E(1,1,e.inAndAmount==null||e.inAndAmount.errors==null||e.inAndAmount.errors.inAndAmountExceedsTotal==null?null:e.inAndAmount.errors.inAndAmountExceedsTotal.totalAmount,"1.2-2"),"). ")}}function Gt(l,i){if(l&1&&(r(0,"div",13),v(1,Ft,1,0),v(2,Vt,2,4),o()),l&2){let e=u();a(),g(!(e.inAndAmount==null||e.inAndAmount.errors==null)&&e.inAndAmount.errors.min?1:-1),a(),g(!(e.inAndAmount==null||e.inAndAmount.errors==null)&&e.inAndAmount.errors.inAndAmountExceedsTotal?2:-1)}}function Bt(l,i){l&1&&t(0," Discount cannot be negative. ")}function Rt(l,i){if(l&1&&(r(0,"div",13),v(1,Bt,1,0),o()),l&2){let e=u();a(),g(!(e.discount==null||e.discount.errors==null)&&e.discount.errors.min?1:-1)}}function Ut(l,i){if(l&1&&(r(0,"div",49)(1,"strong"),t(2,"CGST (\u20B9):"),o(),t(3),x(4,"number"),o(),r(5,"div",49)(6,"strong"),t(7,"SGST (\u20B9):"),o(),t(8),x(9,"number"),o(),r(10,"div",49)(11,"strong"),t(12,"IGST (\u20B9):"),o(),t(13),x(14,"number"),o()),l&2){let e,n,d,s=u();a(3),C(" ",E(4,3,(e=s.invoiceForm.get("cgstAmount"))==null?null:e.value,"1.2-2")," "),a(5),C(" ",E(9,6,(n=s.invoiceForm.get("sgstAmount"))==null?null:n.value,"1.2-2")," "),a(5),C(" ",E(14,9,(d=s.invoiceForm.get("igstAmount"))==null?null:d.value,"1.2-2")," ")}}function qt(l,i){if(l&1){let e=L();r(0,"button",53),h("click",function(){S(e);let d=u();return I(d.navigateToPrint())}),t(1,"Print"),o()}}var X=class l{_coreService=O(H);_apiFs=O(K);_fb=O(Be);_router=O(j);_route=O(oe);workspaceOptions=[];selectedWorkspace=null;isReqAlive=!1;invoiceId=null;invoiceForm;taxTypeOptions=[{value:"cgstSgst",label:"CGST + SGST"},{value:"igst",label:"IGST"}];static CGST_PERCENT=9;static SGST_PERCENT=9;static IGST_PERCENT=18;ngOnInit(){this.buildForm(),this.invoiceId=this._route.snapshot.paramMap.get("invoiceId"),this.loadOptions(),this.setupCalculations(),this.invoiceId&&this.loadInvoice(this.invoiceId)}static atLeastOneLineItemRequired(i){let e=i.get("lineItems");return!e?.value||!Array.isArray(e.value)||e.value.some(d=>(Number(d?.amount)||0)>0)?null:{atLeastOneLineItemRequired:!0}}static lineItemAllOrNothing(i){let e=i,n=(e.get("itemDescription")?.value??"").toString().trim(),d=Number(e.get("qty")?.value),s=Number(e.get("unitPrice")?.value);if(!(n.length>0||d>0||s>0))return null;let b=n.length>0,y=!Number.isNaN(d)&&b?d>0:d>=0,p=!Number.isNaN(s)&&s>=0;return b&&y&&p?null:{lineItemIncomplete:!0}}buildForm(){this.invoiceForm=this._fb.group({workspaceId:["",[D.required]],invoiceDate:[null,[D.required]],amcAmount:[null,[D.required,D.min(0)]],workspace:this._fb.group({firmName:["",[D.required]],gst:["",[]],mobile:["",[]],address:["",[]],subscriptionStartDate:[null,[D.required]],subscriptionEndDate:[null,[D.required]]}),lineItems:this._fb.array([this.createLineItemGroup()]),totalAmount:[{value:0,disabled:!0},[]],discountedTotal:[{value:0,disabled:!0},[]],cgstAmount:[{value:0,disabled:!0},[]],sgstAmount:[{value:0,disabled:!0},[]],igstAmount:[{value:0,disabled:!0},[]],discount:[0,[D.min(0)]],inAndAmount:[null,[D.min(0)]],roundOff:[{value:0,disabled:!0},[]],finalAmount:[{value:0,disabled:!0},[]],includesGst:[null,[D.required]],taxType:["cgstSgst",[]]})}createLineItemGroup(){return this._fb.group({itemDescription:["",[]],qty:[0,[D.min(0)]],unitPrice:[0,[D.min(0)]],amount:[0,[D.min(0)]]})}validateLineItemsOnSubmit(){this.lineItemsArray.controls.forEach(d=>{let s=l.lineItemAllOrNothing(d);d.setErrors(s)}),this.lineItemsArray.updateValueAndValidity({emitEvent:!1});let i=l.atLeastOneLineItemRequired(this.invoiceForm),e=this.invoiceForm.errors??{},n=R({},e);i?n.atLeastOneLineItemRequired=!0:delete n.atLeastOneLineItemRequired,this.invoiceForm.setErrors(Object.keys(n).length?n:null)}get lineItemsArray(){return this.invoiceForm.get("lineItems")}updateLineItemAmount(i){let e=i,n=Number(e.get("qty")?.value)||0,d=Number(e.get("unitPrice")?.value)||0;e.get("amount")?.setValue(Math.round(n*d*100)/100,{emitEvent:!1})}refreshAllLineItemAmounts(){this.lineItemsArray.controls.forEach(i=>this.updateLineItemAmount(i)),this.recalculateTotals()}addLineItem(){let i=this.createLineItemGroup();this.lineItemsArray.push(i),i.get("qty")?.valueChanges.subscribe(()=>this.updateLineItemAmount(i)),i.get("unitPrice")?.valueChanges.subscribe(()=>this.updateLineItemAmount(i)),this.refreshAllLineItemAmounts()}removeLineItem(i){this.lineItemsArray.length>1&&(this.lineItemsArray.removeAt(i),this.refreshAllLineItemAmounts())}loadOptions(){this._apiFs.invoice.getOptions().subscribe({next:i=>{let e=i?.data,n=Array.isArray(e)?e:e?.workspaces??e?.list??[];if(this.workspaceOptions=n.map(d=>Z(R({},d),{workspaceName:d.firmName??""})),this.invoiceId){let d=this.invoiceForm.get("workspaceId")?.value;if(d){let s=this.workspaceOptions.find(f=>(f._id??f.id)===d);s&&(this.selectedWorkspace=s)}}},error:()=>{this.workspaceOptions=[]}})}onWorkspaceSelect(i){if(this.selectedWorkspace=i,this.invoiceForm.patchValue({workspaceId:i?._id??"",amcAmount:i?.amcAmount??null},{emitEvent:!0}),!i)return;this.invoiceForm.get("workspace").patchValue({firmName:i.firmName??"",gst:i.GSTNo??""})}loadInvoice(i){this._apiFs.invoice.getById(i).subscribe({next:e=>{let n=e?.data??e;if(!n)return;let d=n.workspace??{};this.invoiceForm.patchValue({workspaceId:n.workspaceId??"",invoiceDate:n.invoiceDate?.split?.("T")[0]??null,amcAmount:n.amcAmount!=null?Number(n.amcAmount):n.workspace?.amcAmount!=null?Number(n.workspace.amcAmount):null,workspace:{firmName:d.firmName??"",gst:d.gst??d.GSTNo??"",mobile:d.mobile??"",address:d.address??"",subscriptionStartDate:d.subscriptionStartDate?.split("T")[0]??null,subscriptionEndDate:d.subscriptionEndDate?.split("T")[0]??null},discount:Number(n.discount)??0,inAndAmount:n.inAndAmount??null,includesGst:!!n.includesGst,taxType:n.taxType??"cgstSgst"},{emitEvent:!1});let s=n.lineItems;Array.isArray(s)&&s.length>0&&(this.lineItemsArray.clear(),s.forEach(b=>{let y=this.createLineItemGroup();y.patchValue({itemDescription:b.itemDescription??"",qty:Number(b.qty)??0,unitPrice:Number(b.unitPrice)??0,amount:Number(b.amount)??0},{emitEvent:!1}),this.lineItemsArray.push(y),y.get("qty")?.valueChanges.subscribe(()=>this.updateLineItemAmount(y)),y.get("unitPrice")?.valueChanges.subscribe(()=>this.updateLineItemAmount(y))})),this.refreshAllLineItemAmounts();let f=n.workspaceId??n.workspace?._id;if(f&&this.workspaceOptions.length){let b=this.workspaceOptions.find(y=>(y._id??y.id)===f);b&&(this.selectedWorkspace=b)}this.invoiceId&&this.invoiceForm.get("includesGst")?.disable()},error:()=>{this._coreService.utils.showToaster("danger","Failed to load invoice.")}})}setupCalculations(){let i=e=>{let n=e;n.get("qty")?.valueChanges.subscribe(()=>this.updateLineItemAmount(e)),n.get("unitPrice")?.valueChanges.subscribe(()=>this.updateLineItemAmount(e))};this.lineItemsArray.controls.forEach(i),this.lineItemsArray.valueChanges.subscribe(()=>this.recalculateTotals()),this.invoiceForm.valueChanges.subscribe(()=>this.recalculateTotals()),this.refreshAllLineItemAmounts()}recalculateTotals(){let e=this.lineItemsArray.getRawValue().reduce((B,Ze)=>B+(Number(Ze.amount)||0),0),n=this.invoiceForm.get("inAndAmount"),d=n?.value,s=Number(d),f=d!=null&&d!==""&&!Number.isNaN(s);if(n&&f&&s>e)n.setErrors(Z(R({},n.errors??{}),{inAndAmountExceedsTotal:{totalAmount:e}}));else if(n?.errors?.inAndAmountExceedsTotal){let B=R({},n.errors);delete B.inAndAmountExceedsTotal,n.setErrors(Object.keys(B).length?B:null)}let b,y;if(f&&s<=e){let B=Math.max(0,Math.min(s,e));b=Math.round(B*100)/100,y=Math.round((e-b)*100)/100,this.invoiceForm.patchValue({discount:y},{emitEvent:!1})}else y=Number(this.invoiceForm.get("discount")?.value)||0,b=Math.max(0,e-y);let p=!!this.invoiceForm.get("includesGst")?.value,_=this.invoiceForm.get("taxType")?.value||"cgstSgst",P=0,me=0,ue=0;p&&(_==="cgstSgst"?(P=Math.round(b*l.CGST_PERCENT/100*100)/100,me=Math.round(b*l.SGST_PERCENT/100*100)/100):ue=Math.round(b*l.IGST_PERCENT/100*100)/100);let ve=b+P+me+ue,ge=Math.round(ve),Ke=Math.round((ge-ve)*100)/100;this.invoiceForm.patchValue({totalAmount:Math.round(e*100)/100,discountedTotal:Math.round(b*100)/100,cgstAmount:P,sgstAmount:me,igstAmount:ue,roundOff:Ke,finalAmount:ge},{emitEvent:!1}),this.invoiceForm.updateValueAndValidity({emitEvent:!1})}onSubmit(){if(this.isReqAlive)return;if(this.validateLineItemsOnSubmit(),this.invoiceForm.invalid){this.invoiceForm.markAllAsTouched();return}let i=this.invoiceForm.getRawValue(),n=i.lineItems.map(f=>({itemDescription:f.itemDescription??"",qty:Number(f.qty)||0,unitPrice:Number(f.unitPrice)||0,amount:Number(f.amount)||0})).filter(f=>(f.itemDescription?.trim?.()??"").length>0||f.qty>0||f.unitPrice>0||f.amount>0),d={workspaceId:i.workspaceId,invoiceDate:i.invoiceDate||null,amcAmount:i.amcAmount!=null?Number(i.amcAmount):null,workspace:{firmName:i.workspace.firmName??"",gst:i.workspace.gst??"",mobile:i.workspace.mobile??"",address:i.workspace.address??"",subscriptionStartDate:i.workspace.subscriptionStartDate||null,subscriptionEndDate:i.workspace.subscriptionEndDate||null},lineItems:n,totalAmount:i.totalAmount,discountedTotal:i.discountedTotal,includesGst:!!i.includesGst,taxType:i.taxType,cgstAmount:i.cgstAmount,sgstAmount:i.sgstAmount,igstAmount:i.igstAmount,discount:Number(i.discount)||0,roundOff:Number(i.roundOff)||0,finalAmount:i.finalAmount,inAndAmount:i.inAndAmount};this.isReqAlive=!0,(this.invoiceId?this._apiFs.invoice.update(this.invoiceId,d):this._apiFs.invoice.create(d)).subscribe({next:f=>{this.isReqAlive=!1,(f?.code==="OK"||f?.code==="CREATED")&&(this._coreService.utils.showToaster("success",this.invoiceId?"Invoice updated successfully.":"Invoice created successfully."),this._router.navigate([w.ADMIN.BASE,w.ADMIN.INVOICE]))},error:f=>{this.isReqAlive=!1;let b=f?.error?.message||(this.invoiceId?"Failed to update invoice.":"Failed to create invoice. Please try again.");this._coreService.utils.showToaster("danger",b)}})}goBack(){this._router.navigate([w.ADMIN.BASE,w.ADMIN.INVOICE])}navigateToPrint(){this.invoiceId&&this._router.navigate([w.ADMIN.BASE,w.ADMIN.INVOICE,w.ADMIN.INVOICE_PRINT,this.invoiceId])}get workspaceId(){return this.invoiceForm.get("workspaceId")}get invoiceDate(){return this.invoiceForm.get("invoiceDate")}get amcAmount(){return this.invoiceForm.get("amcAmount")}get discount(){return this.invoiceForm.get("discount")}get inAndAmount(){return this.invoiceForm.get("inAndAmount")}get firmName(){return this.invoiceForm.get("workspace.firmName")}get subscriptionStartDate(){return this.invoiceForm.get("workspace.subscriptionStartDate")}get subscriptionEndDate(){return this.invoiceForm.get("workspace.subscriptionEndDate")}get includesGst(){return this.invoiceForm.get("includesGst")}getLineItemControl(i,e){return this.lineItemsArray.at(i)?.get(e)??null}getLineItemRowErrors(i){return this.lineItemsArray.at(i)?.errors??null}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=$({type:l,selectors:[["app-upsert-invoice"]],decls:168,vars:60,consts:[[1,"py-2","px-4","d-flex","gap-3","align-items-center","sticky-inner-header"],[1,"d-flex","flex-grow-1","gap-2"],[1,"mb-0","text-capitalize","fs-4","text-secondary"],[1,"container-xl","py-3"],[3,"ngSubmit","formGroup"],[1,"card","mb-3"],[1,"card-header","fw-semibold"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-6","mb-3"],[1,"form-label"],[1,"text-danger"],["displayKey1","workspaceName","displayKey2","GSTNo","uniqueKey","_id","placeholder","Select workspace",3,"onSelect","optionsList","selectedOption","filterKeys"],[1,"invalid-feedback","d-block"],["type","date","formControlName","invoiceDate",1,"form-control"],["type","number","formControlName","amcAmount","placeholder","AMC amount","min","0","step","1",1,"form-control"],["formGroupName","workspace",1,"card-body"],["type","text","formControlName","firmName","placeholder","Firm name",1,"form-control"],["type","text","formControlName","gst","placeholder","GST number",1,"form-control"],["type","text","formControlName","mobile","placeholder","Mobile",1,"form-control"],["formControlName","address","rows","2","placeholder","Address",1,"form-control"],["type","date","formControlName","subscriptionStartDate",1,"form-control"],["type","date","formControlName","subscriptionEndDate",1,"form-control"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"alert","alert-danger","mb-0","rounded-0","border-0","border-bottom"],[1,"card-body","p-0","overflow-auto"],[1,"table","table-bordered","mb-0"],[1,"table-light"],[2,"min-width","200px"],[2,"width","100px"],[2,"width","120px"],[2,"width","60px"],["formArrayName","lineItems"],[3,"formGroupName","table-danger"],[1,"card-footer"],["type","button",1,"btn","btn-sm","btn-outline-primary","d-block","mx-auto",3,"click"],[1,"col-12","mb-3"],[1,"d-flex","gap-3"],[1,"form-check"],["type","radio","formControlName","includesGst","id","includesGstNo",1,"form-check-input",3,"value"],["for","includesGstNo",1,"form-check-label"],["type","radio","formControlName","includesGst","id","includesGstYes",1,"form-check-input",3,"value"],["for","includesGstYes",1,"form-check-label"],[1,"row","mb-3"],[1,"col-12","col-md-4"],["type","number","formControlName","inAndAmount","min","0","step","1","placeholder","Optional \u2013 amount after discount",1,"form-control"],[1,"form-text"],["type","number","formControlName","discount","min","0","step","1",1,"form-control",3,"readonly"],[1,"col-12","col-md-6","col-lg-4","mb-2"],[1,"col-12","mt-2","pt-2","border-top"],[1,"d-flex","justify-content-end","gap-2","mb-3"],["type","button",1,"btn","btn-outline-secondary"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"formGroupName"],["type","text","formControlName","itemDescription","placeholder","Description",1,"form-control","form-control-sm"],["type","number","formControlName","qty","min","0","step","1",1,"form-control","form-control-sm"],[1,"d-flex","gap-2","align-items-center"],[1,"text-secondary"],["type","number","formControlName","unitPrice","min","0","step","1",1,"form-control","form-control-sm"],["type","number","formControlName","amount","min","0","step","1","tabindex","-1","readonly","",1,"form-control","form-control-sm"],["type","button","tabindex","-1",1,"btn","btn-sm","btn-outline-danger",3,"click","disabled"],["width","22","height","22","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","d","M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17"],[1,"text-muted","small"],["type","radio","formControlName","taxType",1,"form-check-input",3,"value","id"],[1,"form-check-label",3,"for"]],template:function(e,n){if(e&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),t(3),o()(),M(4,"div"),o(),r(5,"div",3)(6,"form",4),h("ngSubmit",function(){return n.onSubmit()}),r(7,"div",5)(8,"div",6),t(9," Workspace "),o(),r(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),t(14," Workspace "),r(15,"span",11),t(16,"*"),o()(),r(17,"app-common-dropdown",12),h("onSelect",function(s){return n.onWorkspaceSelect(s)}),o(),v(18,gt,2,1,"div",13),o(),r(19,"div",9)(20,"label",10),t(21," Invoice date "),r(22,"span",11),t(23,"*"),o()(),M(24,"input",14),v(25,_t,2,1,"div",13),o(),r(26,"div",9)(27,"label",10),t(28,"AMC amount "),r(29,"span",11),t(30,"*"),o()(),M(31,"input",15),v(32,bt,3,2,"div",13),o()()()(),r(33,"div",5)(34,"div",6),t(35,"Party details"),o(),r(36,"div",16)(37,"div",8)(38,"div",9)(39,"label",10),t(40,"Firm name "),r(41,"span",11),t(42,"*"),o()(),M(43,"input",17),v(44,ht,2,1,"div",13),o(),r(45,"div",9)(46,"label",10),t(47,"GST"),o(),M(48,"input",18),o(),r(49,"div",9)(50,"label",10),t(51,"Mobile"),o(),M(52,"input",19),o(),r(53,"div",9)(54,"label",10),t(55,"Address"),o(),M(56,"textarea",20),o(),r(57,"div",9)(58,"label",10),t(59,"Subscription start "),r(60,"span",11),t(61,"*"),o()(),M(62,"input",21),v(63,St,2,1,"div",13),o(),r(64,"div",9)(65,"label",10),t(66,"Subscription end "),r(67,"span",11),t(68,"*"),o()(),M(69,"input",22),v(70,Mt,2,1,"div",13),o()()()(),r(71,"div",5)(72,"div",23)(73,"span",24),t(74,"Line items "),r(75,"span",11),t(76,"*"),o()()(),v(77,wt,2,0,"div",25),r(78,"div",26)(79,"table",27)(80,"thead",28)(81,"tr")(82,"th",29),t(83,"Description"),o(),r(84,"th",30),t(85,"Qty"),o(),r(86,"th",31),t(87,"Unit price"),o(),r(88,"th",31),t(89,"Amount"),o(),M(90,"th",32),o()(),r(91,"tbody",33),F(92,Tt,22,13,"tr",34,xe),o()()(),r(94,"div",35)(95,"button",36),h("click",function(){return n.addLineItem()}),t(96," + Add row "),o()()(),r(97,"div",5)(98,"div",6),t(99,"GST & tax"),o(),r(100,"div",7)(101,"div",8)(102,"div",37)(103,"label",10),t(104,"Invoice includes GST? "),r(105,"span",11),t(106,"*"),o()(),r(107,"div",38)(108,"div",39),M(109,"input",40),r(110,"label",41),t(111,"No"),o()(),r(112,"div",39),M(113,"input",42),r(114,"label",43),t(115,"Yes"),o()()(),v(116,Nt,2,1,"div",13),o(),v(117,Lt,8,0,"div",37),o()()(),r(118,"div",5)(119,"div",6),t(120,"Discount & totals"),o(),r(121,"div",7)(122,"div",44)(123,"div",45)(124,"label",10),t(125,"Clear amount (\u20B9)"),o(),M(126,"input",46),r(127,"div",47),t(128,"Optional. When set, discount is calculated as Total \u2212 Clear amount. Leave empty to enter discount manually."),o(),v(129,Gt,3,2,"div",13),o(),r(130,"div",45)(131,"label",10),t(132,"Discount (\u20B9)"),o(),M(133,"input",48),v(134,Rt,2,1,"div",13),o()(),r(135,"div",8),v(136,Ut,15,12),r(137,"div",49)(138,"strong"),t(139,"Total amount (\u20B9):"),o(),t(140),x(141,"number"),o(),r(142,"div",49)(143,"strong"),t(144,"Discount (\u20B9):"),o(),t(145),x(146,"number"),o(),r(147,"div",49)(148,"strong"),t(149,"After discount (\u20B9):"),o(),t(150),x(151,"number"),o(),r(152,"div",49)(153,"strong"),t(154,"Round off (\u20B9):"),o(),t(155),x(156,"number"),o(),r(157,"div",50)(158,"strong"),t(159,"Final amount (\u20B9):"),o(),t(160),x(161,"number"),o()()()(),r(162,"div",51),v(163,qt,2,0,"button",52),r(164,"button",53),h("click",function(){return n.goBack()}),t(165,"Cancel"),o(),r(166,"button",54),t(167),o()()()()),e&2){let d,s,f,b,y,p,_,P;a(3),C(" ",n.invoiceId?"Edit":"Create"," Invoice "),a(3),A("formGroup",n.invoiceForm),a(11),A("optionsList",n.workspaceOptions)("selectedOption",n.selectedWorkspace)("filterKeys",ne(59,ut)),a(),g(n.workspaceId!=null&&n.workspaceId.touched&&(n.workspaceId!=null&&n.workspaceId.errors)?18:-1),a(6),T("is-invalid",(n.invoiceDate==null?null:n.invoiceDate.touched)&&(n.invoiceDate==null?null:n.invoiceDate.errors)),a(),g(n.invoiceDate!=null&&n.invoiceDate.touched&&(n.invoiceDate!=null&&n.invoiceDate.errors)?25:-1),a(6),T("is-invalid",(n.amcAmount==null?null:n.amcAmount.touched)&&(n.amcAmount==null?null:n.amcAmount.errors)),a(),g(n.amcAmount!=null&&n.amcAmount.touched&&(n.amcAmount!=null&&n.amcAmount.errors)?32:-1),a(11),T("is-invalid",(n.firmName==null?null:n.firmName.touched)&&(n.firmName==null?null:n.firmName.errors)),a(),g(n.firmName!=null&&n.firmName.touched&&(n.firmName!=null&&n.firmName.errors)?44:-1),a(18),T("is-invalid",(n.subscriptionStartDate==null?null:n.subscriptionStartDate.touched)&&(n.subscriptionStartDate==null?null:n.subscriptionStartDate.errors)),a(),g(n.subscriptionStartDate!=null&&n.subscriptionStartDate.touched&&(n.subscriptionStartDate!=null&&n.subscriptionStartDate.errors)?63:-1),a(6),T("is-invalid",(n.subscriptionEndDate==null?null:n.subscriptionEndDate.touched)&&(n.subscriptionEndDate==null?null:n.subscriptionEndDate.errors)),a(),g(n.subscriptionEndDate!=null&&n.subscriptionEndDate.touched&&(n.subscriptionEndDate!=null&&n.subscriptionEndDate.errors)?70:-1),a(),T("border-danger",n.invoiceForm.errors==null?null:n.invoiceForm.errors.atLeastOneLineItemRequired),a(6),g(n.invoiceForm.errors!=null&&n.invoiceForm.errors.atLeastOneLineItemRequired?77:-1),a(15),V(n.lineItemsArray.controls),a(17),A("value",!1),a(4),A("value",!0),a(3),g(n.includesGst!=null&&n.includesGst.touched&&(n.includesGst!=null&&n.includesGst.errors)?116:-1),a(),g((d=n.invoiceForm.get("includesGst"))!=null&&d.value?117:-1),a(9),T("is-invalid",(n.inAndAmount==null?null:n.inAndAmount.touched)&&(n.inAndAmount==null?null:n.inAndAmount.errors)),a(3),g(n.inAndAmount!=null&&n.inAndAmount.touched&&(n.inAndAmount!=null&&n.inAndAmount.errors)?129:-1),a(4),T("is-invalid",(n.discount==null?null:n.discount.touched)&&(n.discount==null?null:n.discount.errors)),A("readonly",((s=n.invoiceForm.get("inAndAmount"))==null?null:s.value)!=null&&((s=n.invoiceForm.get("inAndAmount"))==null?null:s.value)!==""),a(),g(n.discount!=null&&n.discount.touched&&(n.discount!=null&&n.discount.errors)?134:-1),a(2),g((f=n.invoiceForm.get("includesGst"))!=null&&f.value?136:-1),a(4),C(" ",E(141,44,(b=n.invoiceForm.get("totalAmount"))==null?null:b.value,"1.2-2")," "),a(5),C(" ",E(146,47,((y=n.invoiceForm.get("discount"))==null?null:y.value)??0,"1.2-2")," "),a(5),C(" ",E(151,50,(p=n.invoiceForm.get("discountedTotal"))==null?null:p.value,"1.2-2")," "),a(5),C(" ",E(156,53,((_=n.invoiceForm.get("roundOff"))==null?null:_.value)??0,"1.2-2")," "),a(5),C(" ",E(161,56,(P=n.invoiceForm.get("finalAmount"))==null?null:P.value,"1.2-2")," "),a(3),g(n.invoiceId?163:-1),a(3),A("disabled",n.isReqAlive),a(),C(" ",n.isReqAlive?"Saving\u2026":n.invoiceId?"Update Invoice":"Create Invoice"," ")}},dependencies:[Ue,de,re,Pe,Ae,le,ae,Ve,Oe,Ne,Te,ke,Se,qe,Y],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]})};var He=Ce(Ie());var zt=()=>[];function Wt(l,i){l&1&&(m(0,"div",4)(1,"p"),t(2,"Loading invoice\u2026"),c()())}function $t(l,i){if(l&1){let e=L();m(0,"div",5)(1,"p"),t(2),c(),m(3,"button",7),ee("click",function(){S(e);let d=u();return I(d.back())}),t(4,"Back to list"),c()()}if(l&2){let e=u();a(2),te(e.error)}}function Yt(l,i){if(l&1&&(m(0,"span")(1,"strong"),t(2,"GST No.:"),c(),t(3),c()),l&2){let e=u(2);a(3),C(" ",(e.configData==null?null:e.configData.gstNumber)||"-"," ")}}function jt(l,i){if(l&1&&(m(0,"p",28)(1,"span",27),t(2,"Mobile:"),c(),t(3),c()),l&2){let e=u(2);a(3),C(" ",(e.invoice.workspace==null?null:e.invoice.workspace.mobile)||"-"," ")}}function Ht(l,i){if(l&1&&(m(0,"p",29)(1,"span",27),t(2,"GST No.:"),c(),t(3),c()),l&2){let e=u(2);a(3),C(" ",e.invoice.workspace.gst," ")}}function Kt(l,i){if(l&1&&(m(0,"p",28)(1,"span",27),t(2,"Add.:"),c(),t(3),c()),l&2){let e=u(2);a(3),C(" ",e.invoice.workspace==null?null:e.invoice.workspace.address," ")}}function Zt(l,i){if(l&1&&(m(0,"tr")(1,"td",35),t(2),c(),m(3,"td",36),t(4),c(),m(5,"td",37),t(6),c(),m(7,"td",37),t(8),c(),m(9,"td",38),t(10),x(11,"number"),c(),m(12,"td",38),t(13),x(14,"number"),c()()),l&2){let e=i.$implicit,n=i.$index,d=u(2);a(2),C(" ",n+1," "),a(2),C(" ",e.itemDescription??"\u2014"," "),a(2),C(" ",(d.configData==null?null:d.configData.sacCode)??"\u2014"," "),a(2),C(" ",e.qty??0," "),a(2),k(" ",d.currencySymbol,"",E(11,8,e.unitPrice??0,"1.2-2")," "),a(3),k(" ",d.currencySymbol,"",E(14,11,e.amount??0,"1.2-2")," ")}}function Qt(l,i){l&1&&(m(0,"tr")(1,"td",35),t(2," \xA0 "),c(),N(3,"td",36)(4,"td",37)(5,"td",37)(6,"td",38)(7,"td",38),c())}function Xt(l,i){if(l&1&&(m(0,"div",41)(1,"div",60)(2,"p",61),t(3," Bank / Account details "),c(),m(4,"p",62)(5,"strong"),t(6,"Name:"),c(),t(7," DWARKESH INFOTECH "),c(),m(8,"p",62)(9,"strong"),t(10,"IFSC:"),c(),t(11," HDFC0001684 "),c(),m(12,"p",62)(13,"strong"),t(14,"A/C:"),c(),t(15," 50200102054418 "),c(),m(16,"p",62)(17,"strong"),t(18,"Branch:"),c(),t(19," DABHOLI ROAD "),c()(),N(20,"img",63),c()),l&2){let e=u(2);a(20),be("src",e.qrCodeSrc,fe)}}function Jt(l,i){if(l&1&&(m(0,"div",43)(1,"span"),t(2,"Taxable Value"),c(),m(3,"span"),t(4),x(5,"number"),c()(),m(6,"div",43)(7,"span"),t(8,"CGST"),c(),m(9,"span"),t(10),x(11,"number"),c()(),m(12,"div",43)(13,"span"),t(14,"SGST"),c(),m(15,"span"),t(16),x(17,"number"),c()(),m(18,"div",43)(19,"span"),t(20,"IGST"),c(),m(21,"span"),t(22),x(23,"number"),c()()),l&2){let e=u(2);a(4),k(" ",e.currencySymbol,"",E(5,8,(e.invoice==null?null:e.invoice.inAndAmount)??(e.invoice==null?null:e.invoice.discountedTotal)??0,"1.2-2")," "),a(6),k(" ",e.currencySymbol,"",E(11,11,(e.invoice==null?null:e.invoice.cgstAmount)??0,"1.2-2")," "),a(6),k(" ",e.currencySymbol,"",E(17,14,(e.invoice==null?null:e.invoice.sgstAmount)??0,"1.2-2")," "),a(6),k(" ",e.currencySymbol,"",E(23,17,(e.invoice==null?null:e.invoice.igstAmount)??0,"1.2-2")," ")}}function en(l,i){if(l&1&&(m(0,"div",43)(1,"span"),t(2," Round off (+/-) "),c(),m(3,"span"),t(4),x(5,"number"),c()()),l&2){let e=u(2);a(4),k(" ",e.currencySymbol,"",E(5,2,(e.invoice==null?null:e.invoice.roundOff)??0,"1.2-2")," ")}}function tn(l,i){l&1&&(m(0,"li",49),t(1," GST applicable as per Government of India regulations. "),c())}function nn(l,i){if(l&1&&(m(0,"article",6)(1,"div",8)(2,"header",9)(3,"div",10)(4,"h1",11),t(5," TRACKWEAVING "),m(6,"span",12),t(7," (by DWARKESH INFOTECH) "),c()(),W(),m(8,"svg",13)(9,"g",14)(10,"g",15),N(11,"path",16),c(),m(12,"g",15),N(13,"path",17),c(),m(14,"g",15),N(15,"path",18),c(),m(16,"g",15),N(17,"path",19),c(),m(18,"g",15),N(19,"path",20),c()()()(),J(),m(20,"div",21)(21,"span",22)(22,"strong"),t(23,"Address:"),c(),t(24),c()(),m(25,"div",21),v(26,Yt,4,1,"span"),m(27,"span")(28,"strong"),t(29,"Mobile:"),c(),t(30),c()()(),m(31,"div",23)(32,"section",24)(33,"h3",25),t(34," Bill To / M/s "),c(),m(35,"p",26)(36,"span",27),t(37,"Name:"),c(),t(38),c(),v(39,jt,4,1,"p",28),v(40,Ht,4,1,"p",29),v(41,Kt,4,1,"p",28),c(),m(42,"section",30)(43,"h3",25),t(44," Invoice No.: "),m(45,"span",31),t(46),c()(),m(47,"p",32),t(48),x(49,"date"),c()()(),m(50,"div",33)(51,"table",34)(52,"thead")(53,"tr")(54,"th",35),t(55,"Sr."),c(),m(56,"th",36),t(57,"Description"),c(),m(58,"th",37),t(59,"SAC"),c(),m(60,"th",37),t(61,"Qty"),c(),m(62,"th",38),t(63,"Unit Price"),c(),m(64,"th",38),t(65,"Amount"),c()()(),m(66,"tbody"),F(67,Zt,15,14,"tr",null,pe),F(69,Qt,8,0,"tr",null,pe),c()()(),m(71,"div",39)(72,"div",40),v(73,Xt,21,1,"div",41),c(),m(74,"div",42)(75,"div",43)(76,"span"),t(77,"Total"),c(),m(78,"span"),t(79),x(80,"number"),c()(),m(81,"div",43)(82,"span"),t(83,"Discount"),c(),m(84,"span"),t(85),x(86,"number"),c()(),v(87,Jt,24,20),v(88,en,6,5,"div",43),m(89,"div",44)(90,"span"),t(91," Net Payable Amount "),c(),m(92,"span"),t(93),x(94,"number"),c()()()(),m(95,"div",45)(96,"p")(97,"strong"),t(98,"Amount in words:"),c(),t(99),c()(),m(100,"div",46)(101,"p",47),t(102," NOTES & TERMS "),c(),m(103,"ul",48)(104,"li",49),t(105," 50% setup fee payable in advance, 50% after installation completion. "),c(),m(106,"li",49),t(107," Subscription billed in advance and non-refundable. "),c(),m(108,"li",49),t(109," Subscription billing cycle begins from the Subscription Start Date mentioned in this invoice. "),c(),m(110,"li",49),t(111," Hardware covered under 1-year warranty from installation date. "),c(),m(112,"li",49),t(113),c(),m(114,"li",49),t(115," Hardware damage due to external factors is not covered under warranty. "),c(),m(116,"li",49),t(117," Cancellation will take effect from next billing cycle only. "),c(),m(118,"li",49),t(119," No refunds will be issued for the current billing period. "),c(),v(120,tn,2,0,"li",49),c()(),m(121,"footer",50)(122,"div",51)(123,"div",52)(124,"div",53)(125,"div",54)(126,"span",55),t(127," Date "),c(),N(128,"span",56),c(),m(129,"div",54)(130,"span",55),t(131," Chq. No. "),c(),N(132,"span",56),c(),m(133,"div",54)(134,"span",55),t(135," Amt. "),c(),N(136,"span",56),c(),m(137,"div",54)(138,"span",55),t(139," Bank "),c(),N(140,"span",56),c(),m(141,"div",54),N(142,"span",56),c(),m(143,"div",54)(144,"span",55),t(145," Bill No. "),c(),N(146,"span",56),c()()()(),m(147,"div",57)(148,"div",58)(149,"p",59),t(150," Authorised Signatory "),c()(),m(151,"div",58)(152,"p",59),t(153," Receiver's Sign "),c()()()()()()),l&2){let e=u();a(24),C(" ",(e.configData==null?null:e.configData.address)||"-"," "),a(2),g(e.invoice!=null&&e.invoice.includesGst?26:-1),a(4),C(" ",(e.configData==null?null:e.configData.mobile)||"-"," "),a(8),C(" ",(e.invoice.workspace==null?null:e.invoice.workspace.firmName)||"-"," "),a(),g(!(e.invoice==null||e.invoice.workspace==null)&&e.invoice.workspace.mobile?39:-1),a(),g(e.invoice!=null&&e.invoice.includesGst&&(!(e.invoice==null||e.invoice.workspace==null)&&e.invoice.workspace.gst)?40:-1),a(),g(!(e.invoice==null||e.invoice.workspace==null)&&e.invoice.workspace.address?41:-1),a(5),C(" ",(e.invoice==null?null:e.invoice.invoiceNo)??"-"," "),a(2),C(" Date: ",E(49,22,e.invoice==null?null:e.invoice.invoiceDate,"dd/MM/yyyy")," "),a(19),V((e.invoice==null?null:e.invoice.lineItems)??ne(34,zt)),a(2),V(e.emptyTableRows),a(4),g(e.invoice!=null&&e.invoice.includesGst?73:-1),a(6),k(" ",e.currencySymbol,"",E(80,25,(e.invoice==null?null:e.invoice.totalAmount)??0,"1.2-2")," "),a(6),k(" ",e.currencySymbol,"",E(86,28,(e.invoice==null?null:e.invoice.discount)??0,"1.2-2")," "),a(2),g(e.invoice!=null&&e.invoice.includesGst?87:-1),a(),g(((e.invoice==null?null:e.invoice.roundOff)??0)!==0?88:-1),a(5),k(" ",e.currencySymbol,"",E(94,31,(e.invoice==null?null:e.invoice.finalAmount)??0,"1.2-2")," "),a(6),C(" ",e.amountInWords(),". "),a(14),k(" After warranty period, AMC will be ",e.currencySymbol,"",(e.invoice==null?null:e.invoice.amcAmount)??0," per unit per year. "),a(7),g(e.invoice!=null&&e.invoice.includesGst?120:-1)}}var je="invoice-print-view",se=class l{_apiFs=O(K);_coreService=O(H);_router=O(j);_route=O(oe);_doc=O(_e);invoice=null;configData=null;loading=!0;error=null;qrCodeSrc="assets/qr_code.svg";get currencySymbol(){return this._coreService.appConfig?.configData?.currencySymbol??"\u20B9"}get emptyTableRows(){let i=this.invoice?.lineItems?.length??0,e=this.invoice?.includesGst?9:12,n=Math.max(0,e-i);return Array.from({length:n},(d,s)=>s)}ngOnInit(){this._doc.body.classList.add(je);let i=this._route.snapshot.paramMap.get("invoiceId");if(!i){this.error="Invoice ID is required.",this.loading=!1;return}this.getInvoiceDetails(i),this.getConfiguration()}getInvoiceDetails(i){this._apiFs.invoice.getById(i).subscribe({next:e=>{e.code==="OK"&&(this.invoice=e?.data,this.invoice.lineItems=[...this.invoice.lineItems],this.loading=!1,this.invoice||(this.error="Invoice not found."))},error:()=>{this.loading=!1,this.error="Failed to load invoice."}})}getConfiguration(){this._apiFs.invoice.getConfiguration().subscribe({next:i=>{i.code==="OK"&&(this.configData=i.data)},error:()=>{this.configData=null}})}get displayDate(){return this.invoice?.createdAt?(0,He.default)(this.invoice.createdAt).format("DD-MM-YYYY"):""}get invoiceNumber(){return this.invoice?.invoiceNumber??this.invoice?._id??"\u2014"}amountInWords(){let i=Number(this.invoice?.finalAmount??0);if(!Number.isFinite(i)||i<0)return"";let e=Math.floor(i),n=Math.round((i-e)*100),d=this.numberToWords(e),s=d?`Rs. ${d} Only`:"";if(n>0){let f=this.numberToWords(n);return s?`${s} and ${f} Paise`:`Rs. ${f} Paise Only`}return s||"\u2014"}numberToWords(i){if(i===0)return"Zero";let e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],d=p=>{if(p<20)return e[p];let _=Math.floor(p/10),P=p%10;return(n[_]+(P?" "+e[P]:"")).trim()},s=p=>{if(p<100)return d(p);let _=Math.floor(p/100),P=p%100;return(e[_]+" Hundred"+(P?" "+d(P):"")).trim()},f=p=>{if(p<1e3)return s(p);let _=Math.floor(p/1e3),P=p%1e3;return(s(_)+" Thousand"+(P?" "+s(P):"")).trim()},b=p=>{if(p<1e5)return f(p);let _=Math.floor(p/1e5),P=p%1e5;return(d(_)+" Lakh"+(_!==1?"s":"")+(P?" "+f(P):"")).trim()};return(p=>{if(p<1e7)return b(p);let _=Math.floor(p/1e7),P=p%1e7;return(s(_)+" Crore"+(_!==1?"s":"")+(P?" "+b(P):"")).trim()})(i)}print(){window.print()}back(){this._router.navigateByUrl(`/${w.ADMIN.BASE}/${w.ADMIN.INVOICE}`)}ngOnDestroy(){this._doc.body.classList.remove(je)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=$({type:l,selectors:[["app-print-invoice"]],decls:9,vars:3,consts:[["id","invoice-section",1,"invoice-print-page"],[1,"print-actions","no-print"],["type","button",1,"btn","btn-outline-secondary","btn-sm","w-100",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"invoice-loading","no-print"],[1,"invoice-error","no-print"],[1,"invoice-a4"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"invoice-a4-content"],[1,"invoice-header"],[1,"invoice-header-wrap"],[1,"invoice-title"],[1,"invoice-title-sub"],["width","100%","height","100%","viewBox","0 0 2048 2048","xmlns","http://www.w3.org/2000/svg",1,"invoice-logo",2,"fill-rule","evenodd","clip-rule","evenodd","stroke-linejoin","round","stroke-miterlimit","2"],["id","l6o3DLoabXeYvcMB0IhFtnn","transform","matrix(0.1,0,0,0.1,0,0)"],["transform","matrix(1.56523,0,0,1.68911,-4957.84,-2630.41)"],["d","M9260,12288C9022,12223 8909,12151 8704,11934C8374,11583 8171,11394 8009,11288C7800,11151 7411,10994 7145,10940C7031,10917 6823,10831 6733,10769C6610,10685 6457,10505 6381,10352C6305,10201 6225,9975 6186,9805C6100,9423 6098,8931 6181,8536C6303,7958 6592,7522 6960,7363C7058,7321 7112,7309 7231,7303C7443,7292 7637,7384 7845,7594C7966,7716 8022,7794 8098,7945C8192,8132 8273,8374 8300,8545C8305,8578 8316,8650 8325,8705C8355,8898 8347,9414 8309,9610C8292,9699 8258,9853 8250,9880C8245,9894 8231,9939 8219,9980C8207,10021 8193,10059 8188,10064C8184,10070 8180,10080 8180,10087C8180,10111 8056,10362 8005,10440C7958,10514 7908,10578 7840,10654C7801,10697 7678,10806 7640,10831C7626,10840 7618,10850 7621,10854C7631,10864 7842,10820 7909,10794C8159,10696 8369,10437 8514,10048C8554,9940 8611,9723 8628,9615C8634,9577 8644,9516 8650,9480C8671,9358 8674,9030 8656,8850C8647,8759 8635,8672 8631,8655C8626,8639 8617,8591 8610,8550C8592,8442 8565,8346 8502,8175C8385,7854 8173,7567 7905,7368C7861,7335 7824,7304 7822,7299C7820,7294 8708,7290 9969,7290C12087,7290 12122,7290 12213,7310C12567,7387 12875,7648 13067,8035C13184,8271 13235,8446 13292,8820C13309,8929 13309,9383 13292,9500C13261,9716 13239,9818 13190,9969C13119,10192 12974,10450 12839,10594C12779,10659 12772,10680 12812,10680C12823,10680 12851,10685 12874,10691C12896,10697 12933,10706 12955,10712C13035,10732 13177,10792 13265,10842C13423,10931 13548,11034 13870,11340C13972,11436 14107,11562 14170,11620C14233,11678 14375,11812 14487,11918C14715,12136 14728,12156 14694,12227C14682,12250 14662,12272 14640,12282C14607,12299 14459,12300 11950,12299C10295,12298 9282,12294 9260,12288ZM14073,11986C14069,11978 14012,11923 13948,11863C13883,11804 13713,11643 13569,11505C13204,11156 13085,11067 12868,10981C12764,10940 12689,10924 12530,10910C12353,10895 8138,10900 8133,10915C8131,10921 8141,10932 8154,10940C8247,10997 8629,11362 8776,11535C8813,11579 8847,11617 8850,11620C8853,11623 8889,11664 8929,11713C9024,11827 9102,11891 9209,11943L9295,11985L11675,11990C12984,11993 14061,11996 14068,11998C14077,11999 14078,11995 14073,11986ZM7302,10484C7454,10445 7604,10327 7713,10159C7862,9930 7935,9707 7990,9320C8003,9225 7998,8896 7981,8765C7953,8549 7899,8368 7807,8185C7593,7756 7261,7608 6961,7806C6739,7953 6534,8342 6470,8735C6464,8774 6454,8830 6448,8860C6433,8935 6434,9366 6449,9460C6486,9687 6548,9889 6624,10035C6750,10274 6876,10405 7044,10471C7128,10504 7206,10508 7302,10484Z",2,"fill","rgb(4,58,84)","fill-rule","nonzero"],["d","M7053,9965C6745,9869 6579,9324 6702,8810C6768,8534 6922,8345 7123,8290C7283,8247 7496,8364 7594,8549C7667,8689 7699,8823 7707,9030C7724,9495 7554,9873 7286,9963C7227,9983 7113,9984 7053,9965ZM7245,9576C7308,9539 7361,9450 7396,9325C7419,9243 7427,9005 7409,8931C7340,8631 7144,8567 7022,8805C6973,8903 6955,8988 6956,9130C6956,9289 6971,9366 7020,9464C7045,9514 7068,9545 7098,9568C7151,9607 7188,9609 7245,9576Z",2,"fill","rgb(4,58,84)","fill-rule","nonzero"],["d","M4338,11540C4318,11529 4293,11505 4281,11487C4261,11454 4260,11440 4260,11128C4260,10807 4260,10803 4283,10769C4324,10707 4351,10700 4567,10700L4758,10700L4758,8300L4757,5900L4566,5900C4352,5900 4326,5894 4283,5830L4260,5797L4260,5168C4260,4465 4256,4505 4332,4450L4373,4420L4970,4420L4970,3725C4970,2953 4967,2983 5035,2954C5064,2942 5262,2940 6325,2940L7582,2940L7640,2998L7640,4420L8103,4420C8594,4420 8718,4428 8789,4462C8846,4490 8946,4593 9024,4705L9086,4795L9530,4801C9844,4805 9986,4810 10013,4819C10100,4847 10159,4933 10160,5030C10160,5112 10143,5160 10096,5206C10025,5278 10005,5281 9545,5280L9145,5279L9139,5317C9134,5349 9117,5369 9040,5441L8948,5527L9052,5666C9284,5976 9801,6714 9844,6797C9866,6840 9864,6863 9837,6888C9789,6933 9775,6924 9593,6733C9501,6635 9371,6499 9305,6430C9192,6313 8717,5812 8585,5672C8552,5637 8518,5604 8508,5599C8495,5592 8465,5610 8377,5678C8047,5929 7033,6749 6580,7132C6539,7167 6377,7301 6220,7430C6063,7558 5854,7731 5756,7813C5657,7894 5568,7967 5558,7974C5541,7986 5540,8048 5538,9343L5535,10700L5977,10700L6010,10743C6065,10811 6148,10896 6265,11003C6326,11059 6381,11112 6388,11123C6398,11136 6401,11181 6400,11298C6399,11473 6392,11496 6330,11537L6297,11560L5336,11560C4406,11559 4374,11558 4338,11540ZM5608,7247C5645,7217 5855,7050 6075,6875C6602,6456 6598,6459 6725,6354C6786,6304 6891,6221 6960,6170C7029,6118 7137,6033 7200,5980C7431,5786 7773,5509 7866,5440C7884,5426 7900,5409 7900,5403C7900,5393 7657,5390 6720,5390L5540,5390L5540,6329C5540,6846 5537,7275 5534,7284C5524,7310 5537,7303 5608,7247ZM5838,3768L5835,3445L5695,3443C5618,3441 5551,3443 5545,3448C5539,3452 5536,3569 5538,3773L5541,4090L5840,4090L5838,3768ZM6465,4068C6468,4055 6469,3910 6468,3745L6465,3445L6326,3442C6233,3440 6183,3443 6174,3451C6163,3460 6160,3520 6160,3770C6160,3938 6163,4080 6167,4083C6170,4087 6238,4090 6316,4090C6457,4090 6460,4090 6465,4068ZM7088,4082C7097,4075 7100,4004 7098,3759L7095,3445L6948,3442L6800,3439L6800,3758C6800,3933 6803,4080 6807,4083C6816,4093 7072,4091 7088,4082Z",2,"fill","rgb(4,58,84)","fill-rule","nonzero"],["d","M13350,10147C13350,10145 13361,10123 13374,10099C13409,10037 13478,9870 13496,9802C13541,9640 13579,9412 13581,9293L13583,9200L14094,9200C14567,9200 14608,9198 14645,9181C14698,9157 14766,9082 14779,9032C14787,9004 14789,8318 14788,6732L14785,4472L14755,4429C14738,4405 14705,4372 14681,4355L14638,4325L12897,4322L11157,4320L11113,4341C11060,4366 11007,4427 10992,4479C10983,4507 10980,4856 10980,5803L10980,7090L10813,7086L10645,7082L10645,3985L10671,3908C10708,3800 10762,3709 10835,3632C10908,3554 10992,3501 11105,3463L11185,3435L14605,3435L14685,3458C14806,3493 14875,3534 14965,3625C15056,3715 15096,3787 15133,3923L15155,4005L15158,6715C15161,8727 15159,9446 15150,9505C15110,9780 14975,9977 14754,10081C14623,10144 14641,10142 13968,10147C13628,10150 13350,10150 13350,10147ZM13444,3998C13453,3986 13460,3960 13460,3940C13460,3920 13453,3894 13444,3882L13429,3860L12311,3860L12296,3882C12273,3915 12276,3969 12302,3997L12323,4020L13429,4020L13444,3998Z",2,"fill","rgb(4,58,84)","fill-rule","nonzero"],["d","M11598,7082L11421,7080L11464,7022C11487,6991 11576,6871 11660,6755C11745,6640 11893,6439 11990,6309C12086,6179 12180,6052 12197,6026C12257,5941 12298,5943 12445,6038C12495,6071 12657,6175 12805,6270C13187,6514 13258,6560 13271,6576C13281,6588 13291,6577 13325,6518C13368,6441 13508,6214 13692,5921C13774,5791 13798,5745 13788,5739C13781,5735 13756,5718 13733,5701C13663,5650 13651,5561 13708,5507C13741,5475 14197,5270 14235,5270C14270,5270 14316,5297 14329,5327C14344,5361 14344,5860 14329,5894C14314,5926 14257,5954 14222,5945C14207,5942 14171,5923 14143,5904C14114,5885 14087,5870 14082,5870C14077,5870 14064,5888 14052,5909C14031,5945 13798,6324 13541,6740C13485,6831 13427,6917 13412,6933C13376,6971 13329,6969 13259,6927C13126,6845 12756,6611 12558,6482L12342,6342L12322,6364C12306,6382 12168,6567 11939,6880C11909,6921 11865,6983 11842,7016C11820,7050 11795,7079 11788,7081C11781,7083 11695,7084 11598,7082Z",2,"fill","rgb(93,143,74)","fill-rule","nonzero"],[1,"invoice-meta"],[1,"invoice-meta-row"],[1,"invoice-parties"],[1,"party","buyer"],[1,"party-label"],[1,"party-name"],[1,"label"],[1,"party-address"],[1,"party-gst"],[1,"party","seller"],[1,"invoice-no-text"],[1,"party-date"],[1,"invoice-table-wrap"],[1,"invoice-table"],[1,"col-sr"],[1,"col-desc"],[1,"col-num","text-center"],[1,"col-num","text-end"],[1,"invoice-totals"],[1,"account-details"],[1,"account-details-inner"],[1,"totals-grid"],[1,"total-row"],[1,"total-row","total-final"],[1,"invoice-words"],[1,"invoice-terms"],[1,"terms-title"],[1,"terms-list"],[1,"terms-item"],[1,"invoice-footer"],[1,"footer-left"],[1,"buyer-payment-info"],[1,"buyer-payment-fields"],[1,"buyer-field-row"],[1,"buyer-field-label"],[1,"buyer-field-dots"],[1,"footer-right","sign-blocks"],[1,"sign-block"],[1,"sign-label"],[1,"account-details-box"],[1,"account-details-title"],[1,"account-detail-row"],["alt","QR Code","width","80","height","80",1,"invoice-qr",3,"src"]],template:function(e,n){e&1&&(m(0,"div",0)(1,"div",1)(2,"button",2),ee("click",function(){return n.back()}),t(3,"Back"),c(),m(4,"button",3),ee("click",function(){return n.print()}),t(5,"Print"),c()(),v(6,Wt,3,0,"div",4),v(7,$t,5,1,"div",5),v(8,nn,154,35,"article",6),c()),e&2&&(a(6),g(n.loading?6:-1),a(),g(n.error?7:-1),a(),g(n.invoice&&!n.loading&&!n.error?8:-1))},dependencies:[ie,Y],styles:[".invoice-print-page[_ngcontent-%COMP%]{display:block;width:100%;min-height:100vh;padding:1rem;box-sizing:border-box;background:#e8e8e8}.print-actions[_ngcontent-%COMP%]{display:flex;gap:2rem;align-items:center;justify-content:space-between;margin:0 auto .5rem;max-width:210mm}.invoice-loading[_ngcontent-%COMP%], .invoice-error[_ngcontent-%COMP%]{padding:2rem;text-align:center}.invoice-a4[_ngcontent-%COMP%]{width:210mm;min-height:297mm;margin:0 auto;padding:12mm 14mm;background:#fff;color:#111;font-size:11px;line-height:1.35;border-radius:4px;box-sizing:border-box;box-shadow:0 2px 12px #00000026}.invoice-a4[_ngcontent-%COMP%]   .invoice-a4-content[_ngcontent-%COMP%]{margin:0;padding:0 0 12px;box-sizing:border-box;border:2px solid #043A54}.invoice-header[_ngcontent-%COMP%]{text-align:center;position:relative;border-bottom:2px solid #111;padding-top:12px;padding-bottom:8px;margin-bottom:12px}.invoice-header[_ngcontent-%COMP%]   .invoice-header-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.invoice-header[_ngcontent-%COMP%]   .invoice-logo[_ngcontent-%COMP%]{display:block;position:absolute;top:10px;left:14px;height:60px;width:auto}.invoice-header[_ngcontent-%COMP%]   .invoice-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:0;letter-spacing:.5px;text-transform:uppercase}.invoice-header[_ngcontent-%COMP%]   .invoice-title[_ngcontent-%COMP%]   .invoice-title-sub[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#111}.invoice-header[_ngcontent-%COMP%]   .invoice-meta[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;font-size:11px;font-weight:500}.invoice-header[_ngcontent-%COMP%]   .invoice-meta[_ngcontent-%COMP%]   .invoice-meta-row[_ngcontent-%COMP%]{flex:1;line-height:2}.invoice-parties[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr 1fr;gap:16px;margin-bottom:10px}.party[_ngcontent-%COMP%]{padding:0;margin:0}.party[_ngcontent-%COMP%]   .party-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin:0 0 4px;color:#333}.party[_ngcontent-%COMP%]   .party-name[_ngcontent-%COMP%]{font-weight:600;margin:0 0 2px}.party[_ngcontent-%COMP%]   .party-address[_ngcontent-%COMP%], .party[_ngcontent-%COMP%]   .party-contact[_ngcontent-%COMP%], .party[_ngcontent-%COMP%]   .party-gst[_ngcontent-%COMP%]{margin:0 0 2px;color:#444}.party[_ngcontent-%COMP%]   .party-address[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .party[_ngcontent-%COMP%]   .party-contact[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .party[_ngcontent-%COMP%]   .party-gst[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#111}.party[_ngcontent-%COMP%]   .party-address[_ngcontent-%COMP%]{margin:0}.party.buyer[_ngcontent-%COMP%]{padding-left:12px}.party.seller[_ngcontent-%COMP%]   .party-label[_ngcontent-%COMP%]{font-size:14px}.party.seller[_ngcontent-%COMP%]   .party-label[_ngcontent-%COMP%]   .invoice-no-text[_ngcontent-%COMP%]{font-size:20px}.party.seller[_ngcontent-%COMP%]   .party-date[_ngcontent-%COMP%]{font-size:14px}.invoice-table-wrap[_ngcontent-%COMP%]{margin-bottom:16px;overflow:hidden}.invoice-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:12px;font-weight:500;border-color:#043a54}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 6px;vertical-align:top}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #043A54;background:#f0f0f0;font-weight:600;text-align:left}.invoice-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#043a54;color:#fff}.invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;border-left:1px solid #043A54}.invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:1px solid #043A54}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.invoice-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:1px solid #043A54}.invoice-table[_ngcontent-%COMP%]   .col-sr[_ngcontent-%COMP%]{width:28px;text-align:center}.invoice-table[_ngcontent-%COMP%]   .col-desc[_ngcontent-%COMP%]{min-width:120px}.invoice-table[_ngcontent-%COMP%]   .col-num[_ngcontent-%COMP%]{width:58px;white-space:nowrap}.invoice-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.invoice-table[_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{text-align:right}.invoice-totals[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;gap:24px}.account-details[_ngcontent-%COMP%]{flex:1}.account-details-inner[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:0 0 0 12px}.account-details-box[_ngcontent-%COMP%]{margin:0;padding:0;font-size:14px}.account-details-box[_ngcontent-%COMP%]   .account-details-title[_ngcontent-%COMP%]{font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin:0 0 6px;padding-bottom:4px;border-bottom:1px solid #ddd}.account-details-box[_ngcontent-%COMP%]   .account-detail-row[_ngcontent-%COMP%]{margin:0 0 2px;line-height:1.4}.account-details-box[_ngcontent-%COMP%]   .account-detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.invoice-qr[_ngcontent-%COMP%]{display:block;flex-shrink:0;width:100%;max-width:150px;height:auto}.totals-grid[_ngcontent-%COMP%]{flex:1;max-width:280px}.total-row[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;padding:3px 8px;border-bottom:1px solid #ddd}.total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-variant-numeric:tabular-nums}.total-final[_ngcontent-%COMP%]{font-weight:700;font-size:12px;border-bottom:2px solid #043A54;padding-top:6px;margin-top:2px}.invoice-words[_ngcontent-%COMP%]{margin:0 0 6px;border-bottom:1px solid #ddd;font-size:10px}.invoice-words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0 0 6px 12px}.invoice-terms[_ngcontent-%COMP%]{margin-bottom:14px;font-size:12px;color:#444;padding:0 0 0 12px}.invoice-terms[_ngcontent-%COMP%]   .terms-title[_ngcontent-%COMP%]{font-weight:600;margin:0 0 4px}.invoice-terms[_ngcontent-%COMP%]   .terms-list[_ngcontent-%COMP%]{margin:0;padding-left:18px;list-style:disc}.invoice-terms[_ngcontent-%COMP%]   .terms-item[_ngcontent-%COMP%]{margin-bottom:1.5px}.invoice-footer[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:20px;padding-top:12px;border-top:1px solid #aaa}.invoice-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]{flex:1;min-width:0}.invoice-footer[_ngcontent-%COMP%]   .footer-right.sign-blocks[_ngcontent-%COMP%]{flex:2;display:flex;gap:16px;min-width:140px}.buyer-payment-info[_ngcontent-%COMP%]{font-size:10px;padding:0 0 0 12px}.buyer-payment-info[_ngcontent-%COMP%]   .buyer-payment-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.buyer-payment-info[_ngcontent-%COMP%]   .buyer-field-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:4px;min-height:1.4em}.buyer-payment-info[_ngcontent-%COMP%]   .buyer-field-label[_ngcontent-%COMP%]{flex-shrink:0;font-weight:600}.buyer-payment-info[_ngcontent-%COMP%]   .buyer-field-dots[_ngcontent-%COMP%]{flex:1;min-width:20px;border-bottom:1px dotted #333;margin-bottom:2px}.sign-block[_ngcontent-%COMP%]{flex:1}.sign-block[_ngcontent-%COMP%]   .sign-label[_ngcontent-%COMP%]{font-size:11px;font-weight:600;margin:85px 0 0;border-top:1px solid #aaa;padding:6px 0 0;text-align:center}@page{size:A4;margin:0}@media print{.no-print[_ngcontent-%COMP%]{display:none!important}.invoice-print-page[_ngcontent-%COMP%]{padding:0!important;background:#fff!important;min-height:auto!important}body[_ngcontent-%COMP%]{background:#fff!important}.invoice-a4[_ngcontent-%COMP%]{width:100%!important;max-width:210mm!important;min-height:auto!important;margin:0!important;padding:10mm 12mm!important;box-shadow:none!important}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{print-color-adjust:exact;-webkit-print-color-adjust:exact}}@media screen and (max-width: 220mm){.invoice-a4[_ngcontent-%COMP%]{width:100%;max-width:210mm}}"]})};var Qn=[{path:"",redirectTo:w.ADMIN.INVOICE_HOME,pathMatch:"full"},{path:w.ADMIN.INVOICE_HOME,title:Q.ADMIN.INVOICE,component:ce},{path:`${w.ADMIN.INVOICE_PRINT}/:invoiceId`,title:Q.ADMIN.INVOICE_PRINT,component:se},{path:`${w.ADMIN.INVOICE_UPSERT}/:invoiceId`,title:Q.ADMIN.INVOICE_UPSERT,component:X},{path:w.ADMIN.INVOICE_UPSERT,title:Q.ADMIN.INVOICE_UPSERT,component:X}];export{Qn as routes};
